{
    "version": 3,
    "terraform_version": "0.11.13",
    "serial": 2,
    "lineage": "c744e26d-eecd-3de5-d6f8-d8c3e637c306",
    "modules": [
        {
            "path": [
                "root"
            ],
            "outputs": {},
            "resources": {
                "aws_dynamodb_table.version_table": {
                    "type": "aws_dynamodb_table",
                    "depends_on": [],
                    "primary": {
                        "id": "scm_us-west-2_version_table",
                        "attributes": {
                            "arn": "arn:aws:dynamodb:us-west-2:846542577485:table/scm_us-west-2_version_table",
                            "attribute.#": "1",
                            "attribute.2470487362.name": "ComponentName",
                            "attribute.2470487362.type": "S",
                            "billing_mode": "PROVISIONED",
                            "global_secondary_index.#": "0",
                            "hash_key": "ComponentName",
                            "id": "scm_us-west-2_version_table",
                            "local_secondary_index.#": "0",
                            "name": "scm_us-west-2_version_table",
                            "point_in_time_recovery.#": "1",
                            "point_in_time_recovery.0.enabled": "false",
                            "read_capacity": "5",
                            "server_side_encryption.#": "0",
                            "stream_arn": "",
                            "stream_enabled": "false",
                            "stream_label": "",
                            "stream_view_type": "",
                            "tags.%": "3",
                            "tags.Application": "All",
                            "tags.Environment": "prod",
                            "tags.Zone": "All",
                            "ttl.#": "0",
                            "write_capacity": "5"
                        },
                        "meta": {
                            "e2bfb730-ecaa-11e6-8f88-34363bc7c4c0": {
                                "create": 600000000000,
                                "delete": 600000000000,
                                "update": 3600000000000
                            },
                            "schema_version": "1"
                        },
                        "tainted": false
                    },
                    "deposed": [],
                    "provider": "provider.aws"
                },
                "aws_ssm_parameter.scm_primary_bucket": {
                    "type": "aws_ssm_parameter",
                    "depends_on": [
                        "module.replicated_buckets"
                    ],
                    "primary": {
                        "id": "/fams/scm/scm-primary-bucket",
                        "attributes": {
                            "allowed_pattern": "",
                            "arn": "arn:aws:ssm:us-west-2:846542577485:parameter/fams/scm/scm-primary-bucket",
                            "description": "",
                            "id": "/fams/scm/scm-primary-bucket",
                            "key_id": "",
                            "name": "/fams/scm/scm-primary-bucket",
                            "tags.%": "3",
                            "tags.Application": "ALL",
                            "tags.Environment": "prod",
                            "tags.Zone": "SCM",
                            "type": "String",
                            "value": "deployment-packages-w2"
                        },
                        "meta": {},
                        "tainted": false
                    },
                    "deposed": [],
                    "provider": "provider.aws"
                },
                "aws_ssm_parameter.scm_primary_bucket_kms_key": {
                    "type": "aws_ssm_parameter",
                    "depends_on": [
                        "module.replicated_buckets"
                    ],
                    "primary": {
                        "id": "/fams/scm/scm-primary-bucket-kms-key",
                        "attributes": {
                            "allowed_pattern": "",
                            "arn": "arn:aws:ssm:us-west-2:846542577485:parameter/fams/scm/scm-primary-bucket-kms-key",
                            "description": "",
                            "id": "/fams/scm/scm-primary-bucket-kms-key",
                            "key_id": "",
                            "name": "/fams/scm/scm-primary-bucket-kms-key",
                            "tags.%": "3",
                            "tags.Application": "ALL",
                            "tags.Environment": "prod",
                            "tags.Zone": "SCM",
                            "type": "String",
                            "value": "arn:aws:kms:us-west-2:846542577485:key/b3a7437b-eb75-4570-ba0c-9cfafaca7815"
                        },
                        "meta": {},
                        "tainted": false
                    },
                    "deposed": [],
                    "provider": "provider.aws"
                },
                "aws_ssm_parameter.scm_primary_region": {
                    "type": "aws_ssm_parameter",
                    "depends_on": [],
                    "primary": {
                        "id": "/fams/scm/scm-primary-region",
                        "attributes": {
                            "allowed_pattern": "",
                            "arn": "arn:aws:ssm:us-west-2:846542577485:parameter/fams/scm/scm-primary-region",
                            "description": "",
                            "id": "/fams/scm/scm-primary-region",
                            "key_id": "",
                            "name": "/fams/scm/scm-primary-region",
                            "tags.%": "3",
                            "tags.Application": "ALL",
                            "tags.Environment": "prod",
                            "tags.Zone": "SCM",
                            "type": "String",
                            "value": "us-west-2"
                        },
                        "meta": {},
                        "tainted": false
                    },
                    "deposed": [],
                    "provider": "provider.aws"
                },
                "aws_ssm_parameter.scm_secondary_bucket": {
                    "type": "aws_ssm_parameter",
                    "depends_on": [
                        "module.replicated_buckets"
                    ],
                    "primary": {
                        "id": "/fams/scm/scm-secondary-bucket",
                        "attributes": {
                            "allowed_pattern": "",
                            "arn": "arn:aws:ssm:us-west-2:846542577485:parameter/fams/scm/scm-secondary-bucket",
                            "description": "",
                            "id": "/fams/scm/scm-secondary-bucket",
                            "key_id": "",
                            "name": "/fams/scm/scm-secondary-bucket",
                            "tags.%": "3",
                            "tags.Application": "ALL",
                            "tags.Environment": "prod",
                            "tags.Zone": "SCM",
                            "type": "String",
                            "value": "deployment-packages-e1"
                        },
                        "meta": {},
                        "tainted": false
                    },
                    "deposed": [],
                    "provider": "provider.aws"
                },
                "aws_ssm_parameter.scm_secondary_bucket_kms_key": {
                    "type": "aws_ssm_parameter",
                    "depends_on": [
                        "module.replicated_buckets"
                    ],
                    "primary": {
                        "id": "/fams/scm/scm-secondary-bucket-kms-key",
                        "attributes": {
                            "allowed_pattern": "",
                            "arn": "arn:aws:ssm:us-west-2:846542577485:parameter/fams/scm/scm-secondary-bucket-kms-key",
                            "description": "",
                            "id": "/fams/scm/scm-secondary-bucket-kms-key",
                            "key_id": "",
                            "name": "/fams/scm/scm-secondary-bucket-kms-key",
                            "tags.%": "3",
                            "tags.Application": "ALL",
                            "tags.Environment": "prod",
                            "tags.Zone": "SCM",
                            "type": "String",
                            "value": "arn:aws:kms:us-east-1:846542577485:key/bc12fe13-b930-440e-ad06-761f9a0678ee"
                        },
                        "meta": {},
                        "tainted": false
                    },
                    "deposed": [],
                    "provider": "provider.aws"
                },
                "aws_ssm_parameter.scm_secondary_region": {
                    "type": "aws_ssm_parameter",
                    "depends_on": [],
                    "primary": {
                        "id": "/fams/scm/scm-secondary-region",
                        "attributes": {
                            "allowed_pattern": "",
                            "arn": "arn:aws:ssm:us-west-2:846542577485:parameter/fams/scm/scm-secondary-region",
                            "description": "",
                            "id": "/fams/scm/scm-secondary-region",
                            "key_id": "",
                            "name": "/fams/scm/scm-secondary-region",
                            "tags.%": "3",
                            "tags.Application": "ALL",
                            "tags.Environment": "prod",
                            "tags.Zone": "SCM",
                            "type": "String",
                            "value": "us-east-1"
                        },
                        "meta": {},
                        "tainted": false
                    },
                    "deposed": [],
                    "provider": "provider.aws"
                }
            },
            "depends_on": []
        },
        {
            "path": [
                "root",
                "ami_slotted_codebuild"
            ],
            "outputs": {
                "code_build_slots": {
                    "sensitive": false,
                    "type": "list",
                    "value": [
                        "codebuild-ami-slot-0",
                        "codebuild-ami-slot-1",
                        "codebuild-ami-slot-2",
                        "codebuild-ami-slot-3"
                    ]
                },
                "dynamodb_table_arn": {
                    "sensitive": false,
                    "type": "string",
                    "value": "arn:aws:dynamodb:us-west-2:846542577485:table/codebuild-ami-slot_table"
                }
            },
            "resources": {
                "aws_codebuild_project.codebuild_project.0": {
                    "type": "aws_codebuild_project",
                    "depends_on": [
                        "aws_iam_role.codebuild_role"
                    ],
                    "primary": {
                        "id": "arn:aws:codebuild:us-west-2:846542577485:project/codebuild-ami-slot-0",
                        "attributes": {
                            "arn": "arn:aws:codebuild:us-west-2:846542577485:project/codebuild-ami-slot-0",
                            "artifacts.#": "1",
                            "artifacts.1178773975.encryption_disabled": "false",
                            "artifacts.1178773975.location": "",
                            "artifacts.1178773975.name": "",
                            "artifacts.1178773975.namespace_type": "",
                            "artifacts.1178773975.packaging": "",
                            "artifacts.1178773975.path": "",
                            "artifacts.1178773975.type": "NO_ARTIFACTS",
                            "badge_enabled": "false",
                            "badge_url": "",
                            "build_timeout": "120",
                            "cache.#": "1",
                            "cache.0.location": "",
                            "cache.0.type": "NO_CACHE",
                            "description": "code build project for codebuild-ami-0",
                            "encryption_key": "arn:aws:kms:us-west-2:846542577485:alias/aws/s3",
                            "environment.#": "1",
                            "environment.573213581.certificate": "",
                            "environment.573213581.compute_type": "BUILD_GENERAL1_SMALL",
                            "environment.573213581.environment_variable.#": "0",
                            "environment.573213581.image": "aws/codebuild/standard:2.0",
                            "environment.573213581.privileged_mode": "true",
                            "environment.573213581.type": "LINUX_CONTAINER",
                            "id": "arn:aws:codebuild:us-west-2:846542577485:project/codebuild-ami-slot-0",
                            "name": "codebuild-ami-slot-0",
                            "secondary_artifacts.#": "0",
                            "secondary_sources.#": "0",
                            "service_role": "arn:aws:iam::846542577485:role/codebuild-ami-role",
                            "source.#": "1",
                            "source.2341678302.auth.#": "0",
                            "source.2341678302.buildspec": "",
                            "source.2341678302.git_clone_depth": "0",
                            "source.2341678302.insecure_ssl": "false",
                            "source.2341678302.location": "arn:aws:s3:::deployment-packages-w2/codebuild/source/codebuild-ami-slot-0.zip",
                            "source.2341678302.report_build_status": "false",
                            "source.2341678302.type": "S3",
                            "tags.%": "4",
                            "tags.Application": "ALL",
                            "tags.Environment": "prod",
                            "tags.Terraform": "scm",
                            "tags.Zone": "ami_slotted_codebuild",
                            "vpc_config.#": "0"
                        },
                        "meta": {},
                        "tainted": false
                    },
                    "deposed": [],
                    "provider": "provider.aws"
                },
                "aws_codebuild_project.codebuild_project.1": {
                    "type": "aws_codebuild_project",
                    "depends_on": [
                        "aws_iam_role.codebuild_role"
                    ],
                    "primary": {
                        "id": "arn:aws:codebuild:us-west-2:846542577485:project/codebuild-ami-slot-1",
                        "attributes": {
                            "arn": "arn:aws:codebuild:us-west-2:846542577485:project/codebuild-ami-slot-1",
                            "artifacts.#": "1",
                            "artifacts.1178773975.encryption_disabled": "false",
                            "artifacts.1178773975.location": "",
                            "artifacts.1178773975.name": "",
                            "artifacts.1178773975.namespace_type": "",
                            "artifacts.1178773975.packaging": "",
                            "artifacts.1178773975.path": "",
                            "artifacts.1178773975.type": "NO_ARTIFACTS",
                            "badge_enabled": "false",
                            "badge_url": "",
                            "build_timeout": "120",
                            "cache.#": "1",
                            "cache.0.location": "",
                            "cache.0.type": "NO_CACHE",
                            "description": "code build project for codebuild-ami-1",
                            "encryption_key": "arn:aws:kms:us-west-2:846542577485:alias/aws/s3",
                            "environment.#": "1",
                            "environment.573213581.certificate": "",
                            "environment.573213581.compute_type": "BUILD_GENERAL1_SMALL",
                            "environment.573213581.environment_variable.#": "0",
                            "environment.573213581.image": "aws/codebuild/standard:2.0",
                            "environment.573213581.privileged_mode": "true",
                            "environment.573213581.type": "LINUX_CONTAINER",
                            "id": "arn:aws:codebuild:us-west-2:846542577485:project/codebuild-ami-slot-1",
                            "name": "codebuild-ami-slot-1",
                            "secondary_artifacts.#": "0",
                            "secondary_sources.#": "0",
                            "service_role": "arn:aws:iam::846542577485:role/codebuild-ami-role",
                            "source.#": "1",
                            "source.4008974232.auth.#": "0",
                            "source.4008974232.buildspec": "",
                            "source.4008974232.git_clone_depth": "0",
                            "source.4008974232.insecure_ssl": "false",
                            "source.4008974232.location": "arn:aws:s3:::deployment-packages-w2/codebuild/source/codebuild-ami-slot-1.zip",
                            "source.4008974232.report_build_status": "false",
                            "source.4008974232.type": "S3",
                            "tags.%": "4",
                            "tags.Application": "ALL",
                            "tags.Environment": "prod",
                            "tags.Terraform": "scm",
                            "tags.Zone": "ami_slotted_codebuild",
                            "vpc_config.#": "0"
                        },
                        "meta": {},
                        "tainted": false
                    },
                    "deposed": [],
                    "provider": "provider.aws"
                },
                "aws_codebuild_project.codebuild_project.2": {
                    "type": "aws_codebuild_project",
                    "depends_on": [
                        "aws_iam_role.codebuild_role"
                    ],
                    "primary": {
                        "id": "arn:aws:codebuild:us-west-2:846542577485:project/codebuild-ami-slot-2",
                        "attributes": {
                            "arn": "arn:aws:codebuild:us-west-2:846542577485:project/codebuild-ami-slot-2",
                            "artifacts.#": "1",
                            "artifacts.1178773975.encryption_disabled": "false",
                            "artifacts.1178773975.location": "",
                            "artifacts.1178773975.name": "",
                            "artifacts.1178773975.namespace_type": "",
                            "artifacts.1178773975.packaging": "",
                            "artifacts.1178773975.path": "",
                            "artifacts.1178773975.type": "NO_ARTIFACTS",
                            "badge_enabled": "false",
                            "badge_url": "",
                            "build_timeout": "120",
                            "cache.#": "1",
                            "cache.0.location": "",
                            "cache.0.type": "NO_CACHE",
                            "description": "code build project for codebuild-ami-2",
                            "encryption_key": "arn:aws:kms:us-west-2:846542577485:alias/aws/s3",
                            "environment.#": "1",
                            "environment.573213581.certificate": "",
                            "environment.573213581.compute_type": "BUILD_GENERAL1_SMALL",
                            "environment.573213581.environment_variable.#": "0",
                            "environment.573213581.image": "aws/codebuild/standard:2.0",
                            "environment.573213581.privileged_mode": "true",
                            "environment.573213581.type": "LINUX_CONTAINER",
                            "id": "arn:aws:codebuild:us-west-2:846542577485:project/codebuild-ami-slot-2",
                            "name": "codebuild-ami-slot-2",
                            "secondary_artifacts.#": "0",
                            "secondary_sources.#": "0",
                            "service_role": "arn:aws:iam::846542577485:role/codebuild-ami-role",
                            "source.#": "1",
                            "source.1096637010.auth.#": "0",
                            "source.1096637010.buildspec": "",
                            "source.1096637010.git_clone_depth": "0",
                            "source.1096637010.insecure_ssl": "false",
                            "source.1096637010.location": "arn:aws:s3:::deployment-packages-w2/codebuild/source/codebuild-ami-slot-2.zip",
                            "source.1096637010.report_build_status": "false",
                            "source.1096637010.type": "S3",
                            "tags.%": "4",
                            "tags.Application": "ALL",
                            "tags.Environment": "prod",
                            "tags.Terraform": "scm",
                            "tags.Zone": "ami_slotted_codebuild",
                            "vpc_config.#": "0"
                        },
                        "meta": {},
                        "tainted": false
                    },
                    "deposed": [],
                    "provider": "provider.aws"
                },
                "aws_codebuild_project.codebuild_project.3": {
                    "type": "aws_codebuild_project",
                    "depends_on": [
                        "aws_iam_role.codebuild_role"
                    ],
                    "primary": {
                        "id": "arn:aws:codebuild:us-west-2:846542577485:project/codebuild-ami-slot-3",
                        "attributes": {
                            "arn": "arn:aws:codebuild:us-west-2:846542577485:project/codebuild-ami-slot-3",
                            "artifacts.#": "1",
                            "artifacts.1178773975.encryption_disabled": "false",
                            "artifacts.1178773975.location": "",
                            "artifacts.1178773975.name": "",
                            "artifacts.1178773975.namespace_type": "",
                            "artifacts.1178773975.packaging": "",
                            "artifacts.1178773975.path": "",
                            "artifacts.1178773975.type": "NO_ARTIFACTS",
                            "badge_enabled": "false",
                            "badge_url": "",
                            "build_timeout": "120",
                            "cache.#": "1",
                            "cache.0.location": "",
                            "cache.0.type": "NO_CACHE",
                            "description": "code build project for codebuild-ami-3",
                            "encryption_key": "arn:aws:kms:us-west-2:846542577485:alias/aws/s3",
                            "environment.#": "1",
                            "environment.573213581.certificate": "",
                            "environment.573213581.compute_type": "BUILD_GENERAL1_SMALL",
                            "environment.573213581.environment_variable.#": "0",
                            "environment.573213581.image": "aws/codebuild/standard:2.0",
                            "environment.573213581.privileged_mode": "true",
                            "environment.573213581.type": "LINUX_CONTAINER",
                            "id": "arn:aws:codebuild:us-west-2:846542577485:project/codebuild-ami-slot-3",
                            "name": "codebuild-ami-slot-3",
                            "secondary_artifacts.#": "0",
                            "secondary_sources.#": "0",
                            "service_role": "arn:aws:iam::846542577485:role/codebuild-ami-role",
                            "source.#": "1",
                            "source.607805716.auth.#": "0",
                            "source.607805716.buildspec": "",
                            "source.607805716.git_clone_depth": "0",
                            "source.607805716.insecure_ssl": "false",
                            "source.607805716.location": "arn:aws:s3:::deployment-packages-w2/codebuild/source/codebuild-ami-slot-3.zip",
                            "source.607805716.report_build_status": "false",
                            "source.607805716.type": "S3",
                            "tags.%": "4",
                            "tags.Application": "ALL",
                            "tags.Environment": "prod",
                            "tags.Terraform": "scm",
                            "tags.Zone": "ami_slotted_codebuild",
                            "vpc_config.#": "0"
                        },
                        "meta": {},
                        "tainted": false
                    },
                    "deposed": [],
                    "provider": "provider.aws"
                },
                "aws_dynamodb_table.slot_table": {
                    "type": "aws_dynamodb_table",
                    "depends_on": [],
                    "primary": {
                        "id": "codebuild-ami-slot_table",
                        "attributes": {
                            "arn": "arn:aws:dynamodb:us-west-2:846542577485:table/codebuild-ami-slot_table",
                            "attribute.#": "1",
                            "attribute.2470487362.name": "ComponentName",
                            "attribute.2470487362.type": "S",
                            "billing_mode": "PROVISIONED",
                            "global_secondary_index.#": "0",
                            "hash_key": "ComponentName",
                            "id": "codebuild-ami-slot_table",
                            "local_secondary_index.#": "0",
                            "name": "codebuild-ami-slot_table",
                            "point_in_time_recovery.#": "1",
                            "point_in_time_recovery.0.enabled": "false",
                            "read_capacity": "5",
                            "server_side_encryption.#": "0",
                            "stream_arn": "",
                            "stream_enabled": "false",
                            "stream_label": "",
                            "stream_view_type": "",
                            "tags.%": "4",
                            "tags.Application": "ALL",
                            "tags.Environment": "prod",
                            "tags.Terraform": "scm",
                            "tags.Zone": "ami_slotted_codebuild",
                            "ttl.#": "0",
                            "write_capacity": "5"
                        },
                        "meta": {
                            "e2bfb730-ecaa-11e6-8f88-34363bc7c4c0": {
                                "create": 600000000000,
                                "delete": 600000000000,
                                "update": 3600000000000
                            },
                            "schema_version": "1"
                        },
                        "tainted": false
                    },
                    "deposed": [],
                    "provider": "provider.aws"
                },
                "aws_iam_policy.codebuild_policy": {
                    "type": "aws_iam_policy",
                    "depends_on": [
                        "data.aws_caller_identity.current"
                    ],
                    "primary": {
                        "id": "arn:aws:iam::846542577485:policy/service-role/codebuild-ami-policy",
                        "attributes": {
                            "arn": "arn:aws:iam::846542577485:policy/service-role/codebuild-ami-policy",
                            "description": "Policy used in trust relationship with CodeBuild",
                            "id": "arn:aws:iam::846542577485:policy/service-role/codebuild-ami-policy",
                            "name": "codebuild-ami-policy",
                            "path": "/service-role/",
                            "policy": "{\n    \"Version\": \"2012-10-17\",\n    \"Statement\": [\n       {\n            \"Sid\": \"VisualEditor0\",\n            \"Effect\": \"Allow\",\n            \"Action\": [\n                \"s3:GetObject\",\n                \"s3:PutObject\",\n                \"s3:ListBucket\",\n\t\t\t\t        \"s3:GetObjectVersion\"\n            ],\n            \"Resource\": [\n              \"arn:aws:s3:::deployment-packages-w2\",\n              \"arn:aws:s3:::deployment-packages-w2/*\"\n            ]\n        },\n        {\n\n            \"Effect\": \"Allow\",\n            \"Action\": [\n                \"kms:ListAliases\",\n                \"kms:ListKeys\",\n                \"kms:Encrypt\",\n                \"kms:Decrypt\",\n                \"kms:ReEncrypt*\",\n                \"kms:GenerateDataKey*\",\n                \"kms:DescribeKey\"\n            ],\n            \"Resource\": [\n              \"arn:aws:kms:us-west-2:846542577485:key/b3a7437b-eb75-4570-ba0c-9cfafaca7815\"\n            ]\n        },\n        {\n            \"Sid\": \"VisualEditor4\",\n            \"Effect\": \"Allow\",\n            \"Action\": [\n                \"logs:CreateLogGroup\",\n                \"logs:CreateLogStream\",\n                \"logs:PutLogEvents\",\n                \"logs:DescribeLogStreams\"\n            ],\n            \"Resource\": [\n                \"*\"\n            ]\n        },\n        {\n            \"Sid\": \"VisualEditor6\",\n            \"Effect\": \"Allow\",\n            \"Action\": [\n                \"ecr:CreateRepository\",\n                \"ecr:GetAuthorizationToken\",\n                \"ecr:InitiateLayerUpload\",\n                \"ecr:UploadLayerPart\",\n                \"ecr:CompleteLayerUpload\",\n                \"ecr:BatchCheckLayerAvailability\",\n                \"ecr:PutImage\",\n                \"ecr:GetDownloadUrlForLayer\",\n                \"ecr:BatchGetImage\",\n                \"ecr:SetRepositoryPolicy\"\n            ],\n            \"Resource\": \"*\"\n        },\n        {\n            \"Sid\": \"VisualEditor7\",\n            \"Effect\": \"Allow\",\n            \"Action\": \"ssm:GetParameter\",\n            \"Resource\": [\n              \"arn:aws:ssm:us-west-2:846542577485:parameter/scm/*\",\n              \"arn:aws:ssm:us-east-1:846542577485:parameter/scm/*\",\n              \"arn:aws:ssm:us-west-2:846542577485:parameter/scm_packages/*\",\n              \"arn:aws:ssm:us-east-1:846542577485:parameter/scm_packages/*\"\n            ]\n        },\n        {\n            \"Effect\": \"Allow\",\n            \"Action\": \"ssm:GetParameters\",\n            \"Resource\": [\n              \"arn:aws:ssm:us-west-2:846542577485:parameter/aws/service/*\",\n              \"arn:aws:ssm:us-east-1:846542577485:parameter/aws/service/*\",\n              \"arn:aws:ssm:us-west-2::parameter/aws/service/*\",\n              \"arn:aws:ssm:us-east-1::parameter/aws/service/*\"\n            ]\n        },\n        {\n            \"Effect\": \"Allow\",\n            \"Action\" : [\n                \"ec2:AttachVolume\",\n                \"ec2:AuthorizeSecurityGroupIngress\",\n                \"ec2:CopyImage\",\n                \"ec2:CreateImage\",\n                \"ec2:CreateKeypair\",\n                \"ec2:CreateSecurityGroup\",\n                \"ec2:CreateSnapshot\",\n                \"ec2:CreateTags\",\n                \"ec2:CreateVolume\",\n                \"ec2:DeleteKeypair\",\n                \"ec2:DeleteSecurityGroup\",\n                \"ec2:DeleteSnapshot\",\n                \"ec2:DeleteVolume\",\n                \"ec2:DeregisterImage\",\n                \"ec2:DescribeImageAttribute\",\n                \"ec2:DescribeImages\",\n                \"ec2:DescribeInstances\",\n                \"ec2:DescribeInstanceStatus\",\n                \"ec2:DescribeRegions\",\n                \"ec2:DescribeSecurityGroups\",\n                \"ec2:DescribeSnapshots\",\n                \"ec2:DescribeSubnets\",\n                \"ec2:DescribeTags\",\n                \"ec2:DescribeVolumes\",\n                \"ec2:DetachVolume\",\n                \"ec2:GetPasswordData\",\n                \"ec2:ModifyImageAttribute\",\n                \"ec2:ModifyInstanceAttribute\",\n                \"ec2:ModifySnapshotAttribute\",\n                \"ec2:RegisterImage\",\n                \"ec2:RunInstances\",\n                \"ec2:StopInstances\",\n                \"ec2:TerminateInstances\"\n              ],\n            \"Resource\": \"*\"\n        }\n  ]\n}\n"
                        },
                        "meta": {},
                        "tainted": false
                    },
                    "deposed": [],
                    "provider": "provider.aws"
                },
                "aws_iam_policy_attachment.codebuild_policy_attachment": {
                    "type": "aws_iam_policy_attachment",
                    "depends_on": [
                        "aws_iam_policy.codebuild_policy",
                        "aws_iam_role.codebuild_role"
                    ],
                    "primary": {
                        "id": "codebuild-ami-policy-attachment",
                        "attributes": {
                            "groups.#": "0",
                            "id": "codebuild-ami-policy-attachment",
                            "name": "codebuild-ami-policy-attachment",
                            "policy_arn": "arn:aws:iam::846542577485:policy/service-role/codebuild-ami-policy",
                            "roles.#": "1",
                            "roles.1538326038": "codebuild-ami-role",
                            "users.#": "0"
                        },
                        "meta": {},
                        "tainted": false
                    },
                    "deposed": [],
                    "provider": "provider.aws"
                },
                "aws_iam_role.codebuild_role": {
                    "type": "aws_iam_role",
                    "depends_on": [],
                    "primary": {
                        "id": "codebuild-ami-role",
                        "attributes": {
                            "arn": "arn:aws:iam::846542577485:role/codebuild-ami-role",
                            "assume_role_policy": "{\"Version\":\"2012-10-17\",\"Statement\":[{\"Effect\":\"Allow\",\"Principal\":{\"Service\":\"codebuild.amazonaws.com\"},\"Action\":\"sts:AssumeRole\"}]}",
                            "create_date": "2019-07-17T19:11:59Z",
                            "description": "",
                            "force_detach_policies": "false",
                            "id": "codebuild-ami-role",
                            "max_session_duration": "3600",
                            "name": "codebuild-ami-role",
                            "path": "/",
                            "tags.%": "0",
                            "unique_id": "AROA4KGO6T5G265PJOKNT"
                        },
                        "meta": {},
                        "tainted": false
                    },
                    "deposed": [],
                    "provider": "provider.aws"
                },
                "data.aws_caller_identity.current": {
                    "type": "aws_caller_identity",
                    "depends_on": [],
                    "primary": {
                        "id": "2019-07-17 19:11:22.6785588 +0000 UTC",
                        "attributes": {
                            "account_id": "846542577485",
                            "arn": "arn:aws:iam::846542577485:user/khatibinil",
                            "id": "2019-07-17 19:11:22.6785588 +0000 UTC",
                            "user_id": "AIDAJRWUITJLOOC2D7VA6"
                        },
                        "meta": {},
                        "tainted": false
                    },
                    "deposed": [],
                    "provider": "provider.aws"
                },
                "data.template_file.init_slots_powershell": {
                    "type": "template_file",
                    "depends_on": [
                        "aws_codebuild_project.codebuild_project"
                    ],
                    "primary": {
                        "id": "0507181ce8dfa17421757886b53c64c37bc14e8c068800cc5ea1e2c39a66bc88",
                        "attributes": {
                            "id": "0507181ce8dfa17421757886b53c64c37bc14e8c068800cc5ea1e2c39a66bc88",
                            "rendered": "function run-native($command) { \u0026 $command ($args -replace'(\\\\*)\"','$1$1\\\"') }\r\n#$region =\"us-west-2\"\r\n$count=4\r\n$slots=@()\r\nwhile ($count -gt 0){\r\n    $slots+=\"codebuild-ami-slot-{0}\" -f $count\r\n    $count--\r\n}\r\n\r\nforeach ($slot in $slots) \r\n{\r\n    $j = @{\r\n        ComponentName = @{\r\n            S=\"$slot\"\r\n            }\r\n        }\r\n    $keyjson = ConvertTo-Json $j\r\n    $output =  run-native aws dynamodb get-item `\r\n        --table-name \"codebuild-ami-slot_table\" --region us-west-2 `\r\n        --key $keyjson `\r\n        --projection-expression \"SlotFamily, cv\" --profile khatibinil\r\n    \r\n    if( -not $output) \r\n    {      \r\n        #use powershell to build JSON\r\n        $j = @{\r\n            ComponentName = @{\r\n                S=\"$slot\"\r\n            }\r\n            SlotFamily = @{\r\n            S=\"codebuild-ami-slot\"\r\n            }\r\n            cv = @{\r\n                N=\"0\"\r\n            }\r\n        }\r\n        $itemjson = ConvertTo-Json $j\r\n\r\n        run-native aws dynamodb put-item `\r\n        --table-name \"codebuild-ami-slot_table\"  --region us-west-2 `\r\n        --item $itemjson `\r\n        --return-values ALL_OLD `\r\n        --profile khatibinil\r\n    }\r\n\r\n}",
                            "template": "function run-native($command) { \u0026 $command ($args -replace'(\\\\*)\"','$1$1\\\"') }\r\n#$region =\"us-west-2\"\r\n$count=${count}\r\n$slots=@()\r\nwhile ($count -gt 0){\r\n    $slots+=\"${slot_family}-slot-{0}\" -f $count\r\n    $count--\r\n}\r\n\r\nforeach ($slot in $slots) \r\n{\r\n    $j = @{\r\n        ComponentName = @{\r\n            S=\"$slot\"\r\n            }\r\n        }\r\n    $keyjson = ConvertTo-Json $j\r\n    $output =  run-native aws dynamodb get-item `\r\n        --table-name \"${slot_family}-slot_table\" --region ${aws_region} `\r\n        --key $keyjson `\r\n        --projection-expression \"SlotFamily, cv\" --profile ${aws_profile}\r\n    \r\n    if( -not $output) \r\n    {      \r\n        #use powershell to build JSON\r\n        $j = @{\r\n            ComponentName = @{\r\n                S=\"$slot\"\r\n            }\r\n            SlotFamily = @{\r\n            S=\"${slot_family}-slot\"\r\n            }\r\n            cv = @{\r\n                N=\"0\"\r\n            }\r\n        }\r\n        $itemjson = ConvertTo-Json $j\r\n\r\n        run-native aws dynamodb put-item `\r\n        --table-name \"${slot_family}-slot_table\"  --region ${aws_region} `\r\n        --item $itemjson `\r\n        --return-values ALL_OLD `\r\n        --profile ${aws_profile}\r\n    }\r\n\r\n}",
                            "vars.%": "4",
                            "vars.aws_profile": "khatibinil",
                            "vars.aws_region": "us-west-2",
                            "vars.count": "4",
                            "vars.slot_family": "codebuild-ami"
                        },
                        "meta": {},
                        "tainted": false
                    },
                    "deposed": [],
                    "provider": "provider.template"
                },
                "local_file.init_slots_powershell": {
                    "type": "local_file",
                    "depends_on": [
                        "data.template_file.init_slots_powershell"
                    ],
                    "primary": {
                        "id": "1fc3b01bb672e9705340f4cd0c66f514922ea43a",
                        "attributes": {
                            "content": "function run-native($command) { \u0026 $command ($args -replace'(\\\\*)\"','$1$1\\\"') }\r\n#$region =\"us-west-2\"\r\n$count=4\r\n$slots=@()\r\nwhile ($count -gt 0){\r\n    $slots+=\"codebuild-ami-slot-{0}\" -f $count\r\n    $count--\r\n}\r\n\r\nforeach ($slot in $slots) \r\n{\r\n    $j = @{\r\n        ComponentName = @{\r\n            S=\"$slot\"\r\n            }\r\n        }\r\n    $keyjson = ConvertTo-Json $j\r\n    $output =  run-native aws dynamodb get-item `\r\n        --table-name \"codebuild-ami-slot_table\" --region us-west-2 `\r\n        --key $keyjson `\r\n        --projection-expression \"SlotFamily, cv\" --profile khatibinil\r\n    \r\n    if( -not $output) \r\n    {      \r\n        #use powershell to build JSON\r\n        $j = @{\r\n            ComponentName = @{\r\n                S=\"$slot\"\r\n            }\r\n            SlotFamily = @{\r\n            S=\"codebuild-ami-slot\"\r\n            }\r\n            cv = @{\r\n                N=\"0\"\r\n            }\r\n        }\r\n        $itemjson = ConvertTo-Json $j\r\n\r\n        run-native aws dynamodb put-item `\r\n        --table-name \"codebuild-ami-slot_table\"  --region us-west-2 `\r\n        --item $itemjson `\r\n        --return-values ALL_OLD `\r\n        --profile khatibinil\r\n    }\r\n\r\n}",
                            "filename": "C:\\VSTS\\SCM\\slotted-codebuilds.terraform\\.terraform\\modules\\84dcfd4acef7486fb8fd0c2335b4eb4b/init-slots-build-codebuild-ami.ps1",
                            "id": "1fc3b01bb672e9705340f4cd0c66f514922ea43a"
                        },
                        "meta": {},
                        "tainted": false
                    },
                    "deposed": [],
                    "provider": "provider.local"
                },
                "null_resource.init_slots": {
                    "type": "null_resource",
                    "depends_on": [
                        "data.template_file.init_slots_powershell"
                    ],
                    "primary": {
                        "id": "528748202349525631",
                        "attributes": {
                            "id": "528748202349525631",
                            "triggers.%": "1",
                            "triggers.test": "function run-native($command) { \u0026 $command ($args -replace'(\\\\*)\"','$1$1\\\"') }\r\n#$region =\"us-west-2\"\r\n$count=4\r\n$slots=@()\r\nwhile ($count -gt 0){\r\n    $slots+=\"codebuild-ami-slot-{0}\" -f $count\r\n    $count--\r\n}\r\n\r\nforeach ($slot in $slots) \r\n{\r\n    $j = @{\r\n        ComponentName = @{\r\n            S=\"$slot\"\r\n            }\r\n        }\r\n    $keyjson = ConvertTo-Json $j\r\n    $output =  run-native aws dynamodb get-item `\r\n        --table-name \"codebuild-ami-slot_table\" --region us-west-2 `\r\n        --key $keyjson `\r\n        --projection-expression \"SlotFamily, cv\" --profile khatibinil\r\n    \r\n    if( -not $output) \r\n    {      \r\n        #use powershell to build JSON\r\n        $j = @{\r\n            ComponentName = @{\r\n                S=\"$slot\"\r\n            }\r\n            SlotFamily = @{\r\n            S=\"codebuild-ami-slot\"\r\n            }\r\n            cv = @{\r\n                N=\"0\"\r\n            }\r\n        }\r\n        $itemjson = ConvertTo-Json $j\r\n\r\n        run-native aws dynamodb put-item `\r\n        --table-name \"codebuild-ami-slot_table\"  --region us-west-2 `\r\n        --item $itemjson `\r\n        --return-values ALL_OLD `\r\n        --profile khatibinil\r\n    }\r\n\r\n}"
                        },
                        "meta": {},
                        "tainted": false
                    },
                    "deposed": [],
                    "provider": "provider.null"
                }
            },
            "depends_on": []
        },
        {
            "path": [
                "root",
                "dotnet_slotted_codebuild"
            ],
            "outputs": {
                "code_build_slots": {
                    "sensitive": false,
                    "type": "list",
                    "value": [
                        "codebuild-dotnet-slot-0",
                        "codebuild-dotnet-slot-1",
                        "codebuild-dotnet-slot-2",
                        "codebuild-dotnet-slot-3"
                    ]
                },
                "dynamodb_table_arn": {
                    "sensitive": false,
                    "type": "string",
                    "value": "arn:aws:dynamodb:us-west-2:846542577485:table/codebuild-dotnet-slot_table"
                }
            },
            "resources": {
                "aws_codebuild_project.codebuild_project.0": {
                    "type": "aws_codebuild_project",
                    "depends_on": [
                        "aws_iam_role.codebuild_role"
                    ],
                    "primary": {
                        "id": "arn:aws:codebuild:us-west-2:846542577485:project/codebuild-dotnet-slot-0",
                        "attributes": {
                            "arn": "arn:aws:codebuild:us-west-2:846542577485:project/codebuild-dotnet-slot-0",
                            "artifacts.#": "1",
                            "artifacts.1178773975.encryption_disabled": "false",
                            "artifacts.1178773975.location": "",
                            "artifacts.1178773975.name": "",
                            "artifacts.1178773975.namespace_type": "",
                            "artifacts.1178773975.packaging": "",
                            "artifacts.1178773975.path": "",
                            "artifacts.1178773975.type": "NO_ARTIFACTS",
                            "badge_enabled": "false",
                            "badge_url": "",
                            "build_timeout": "120",
                            "cache.#": "1",
                            "cache.0.location": "",
                            "cache.0.type": "NO_CACHE",
                            "description": "code build project for codebuild-dotnet-0",
                            "encryption_key": "arn:aws:kms:us-west-2:846542577485:alias/aws/s3",
                            "environment.#": "1",
                            "environment.1622289142.certificate": "",
                            "environment.1622289142.compute_type": "BUILD_GENERAL1_SMALL",
                            "environment.1622289142.environment_variable.#": "0",
                            "environment.1622289142.image": "aws/codebuild/standard:2.0",
                            "environment.1622289142.privileged_mode": "false",
                            "environment.1622289142.type": "LINUX_CONTAINER",
                            "id": "arn:aws:codebuild:us-west-2:846542577485:project/codebuild-dotnet-slot-0",
                            "name": "codebuild-dotnet-slot-0",
                            "secondary_artifacts.#": "0",
                            "secondary_sources.#": "0",
                            "service_role": "arn:aws:iam::846542577485:role/codebuild-dotnet-role",
                            "source.#": "1",
                            "source.1684007254.auth.#": "0",
                            "source.1684007254.buildspec": "",
                            "source.1684007254.git_clone_depth": "0",
                            "source.1684007254.insecure_ssl": "false",
                            "source.1684007254.location": "arn:aws:s3:::deployment-packages-w2/codebuild/source/codebuild-dotnet-slot-0.zip",
                            "source.1684007254.report_build_status": "false",
                            "source.1684007254.type": "S3",
                            "tags.%": "4",
                            "tags.Application": "ALL",
                            "tags.Environment": "prod",
                            "tags.Terraform": "scm",
                            "tags.Zone": "dotnet_slotted_codebuild",
                            "vpc_config.#": "0"
                        },
                        "meta": {},
                        "tainted": false
                    },
                    "deposed": [],
                    "provider": "provider.aws"
                },
                "aws_codebuild_project.codebuild_project.1": {
                    "type": "aws_codebuild_project",
                    "depends_on": [
                        "aws_iam_role.codebuild_role"
                    ],
                    "primary": {
                        "id": "arn:aws:codebuild:us-west-2:846542577485:project/codebuild-dotnet-slot-1",
                        "attributes": {
                            "arn": "arn:aws:codebuild:us-west-2:846542577485:project/codebuild-dotnet-slot-1",
                            "artifacts.#": "1",
                            "artifacts.1178773975.encryption_disabled": "false",
                            "artifacts.1178773975.location": "",
                            "artifacts.1178773975.name": "",
                            "artifacts.1178773975.namespace_type": "",
                            "artifacts.1178773975.packaging": "",
                            "artifacts.1178773975.path": "",
                            "artifacts.1178773975.type": "NO_ARTIFACTS",
                            "badge_enabled": "false",
                            "badge_url": "",
                            "build_timeout": "120",
                            "cache.#": "1",
                            "cache.0.location": "",
                            "cache.0.type": "NO_CACHE",
                            "description": "code build project for codebuild-dotnet-1",
                            "encryption_key": "arn:aws:kms:us-west-2:846542577485:alias/aws/s3",
                            "environment.#": "1",
                            "environment.1622289142.certificate": "",
                            "environment.1622289142.compute_type": "BUILD_GENERAL1_SMALL",
                            "environment.1622289142.environment_variable.#": "0",
                            "environment.1622289142.image": "aws/codebuild/standard:2.0",
                            "environment.1622289142.privileged_mode": "false",
                            "environment.1622289142.type": "LINUX_CONTAINER",
                            "id": "arn:aws:codebuild:us-west-2:846542577485:project/codebuild-dotnet-slot-1",
                            "name": "codebuild-dotnet-slot-1",
                            "secondary_artifacts.#": "0",
                            "secondary_sources.#": "0",
                            "service_role": "arn:aws:iam::846542577485:role/codebuild-dotnet-role",
                            "source.#": "1",
                            "source.20501008.auth.#": "0",
                            "source.20501008.buildspec": "",
                            "source.20501008.git_clone_depth": "0",
                            "source.20501008.insecure_ssl": "false",
                            "source.20501008.location": "arn:aws:s3:::deployment-packages-w2/codebuild/source/codebuild-dotnet-slot-1.zip",
                            "source.20501008.report_build_status": "false",
                            "source.20501008.type": "S3",
                            "tags.%": "4",
                            "tags.Application": "ALL",
                            "tags.Environment": "prod",
                            "tags.Terraform": "scm",
                            "tags.Zone": "dotnet_slotted_codebuild",
                            "vpc_config.#": "0"
                        },
                        "meta": {},
                        "tainted": false
                    },
                    "deposed": [],
                    "provider": "provider.aws"
                },
                "aws_codebuild_project.codebuild_project.2": {
                    "type": "aws_codebuild_project",
                    "depends_on": [
                        "aws_iam_role.codebuild_role"
                    ],
                    "primary": {
                        "id": "arn:aws:codebuild:us-west-2:846542577485:project/codebuild-dotnet-slot-2",
                        "attributes": {
                            "arn": "arn:aws:codebuild:us-west-2:846542577485:project/codebuild-dotnet-slot-2",
                            "artifacts.#": "1",
                            "artifacts.1178773975.encryption_disabled": "false",
                            "artifacts.1178773975.location": "",
                            "artifacts.1178773975.name": "",
                            "artifacts.1178773975.namespace_type": "",
                            "artifacts.1178773975.packaging": "",
                            "artifacts.1178773975.path": "",
                            "artifacts.1178773975.type": "NO_ARTIFACTS",
                            "badge_enabled": "false",
                            "badge_url": "",
                            "build_timeout": "120",
                            "cache.#": "1",
                            "cache.0.location": "",
                            "cache.0.type": "NO_CACHE",
                            "description": "code build project for codebuild-dotnet-2",
                            "encryption_key": "arn:aws:kms:us-west-2:846542577485:alias/aws/s3",
                            "environment.#": "1",
                            "environment.1622289142.certificate": "",
                            "environment.1622289142.compute_type": "BUILD_GENERAL1_SMALL",
                            "environment.1622289142.environment_variable.#": "0",
                            "environment.1622289142.image": "aws/codebuild/standard:2.0",
                            "environment.1622289142.privileged_mode": "false",
                            "environment.1622289142.type": "LINUX_CONTAINER",
                            "id": "arn:aws:codebuild:us-west-2:846542577485:project/codebuild-dotnet-slot-2",
                            "name": "codebuild-dotnet-slot-2",
                            "secondary_artifacts.#": "0",
                            "secondary_sources.#": "0",
                            "service_role": "arn:aws:iam::846542577485:role/codebuild-dotnet-role",
                            "source.#": "1",
                            "source.2928779226.auth.#": "0",
                            "source.2928779226.buildspec": "",
                            "source.2928779226.git_clone_depth": "0",
                            "source.2928779226.insecure_ssl": "false",
                            "source.2928779226.location": "arn:aws:s3:::deployment-packages-w2/codebuild/source/codebuild-dotnet-slot-2.zip",
                            "source.2928779226.report_build_status": "false",
                            "source.2928779226.type": "S3",
                            "tags.%": "4",
                            "tags.Application": "ALL",
                            "tags.Environment": "prod",
                            "tags.Terraform": "scm",
                            "tags.Zone": "dotnet_slotted_codebuild",
                            "vpc_config.#": "0"
                        },
                        "meta": {},
                        "tainted": false
                    },
                    "deposed": [],
                    "provider": "provider.aws"
                },
                "aws_codebuild_project.codebuild_project.3": {
                    "type": "aws_codebuild_project",
                    "depends_on": [
                        "aws_iam_role.codebuild_role"
                    ],
                    "primary": {
                        "id": "arn:aws:codebuild:us-west-2:846542577485:project/codebuild-dotnet-slot-3",
                        "attributes": {
                            "arn": "arn:aws:codebuild:us-west-2:846542577485:project/codebuild-dotnet-slot-3",
                            "artifacts.#": "1",
                            "artifacts.1178773975.encryption_disabled": "false",
                            "artifacts.1178773975.location": "",
                            "artifacts.1178773975.name": "",
                            "artifacts.1178773975.namespace_type": "",
                            "artifacts.1178773975.packaging": "",
                            "artifacts.1178773975.path": "",
                            "artifacts.1178773975.type": "NO_ARTIFACTS",
                            "badge_enabled": "false",
                            "badge_url": "",
                            "build_timeout": "120",
                            "cache.#": "1",
                            "cache.0.location": "",
                            "cache.0.type": "NO_CACHE",
                            "description": "code build project for codebuild-dotnet-3",
                            "encryption_key": "arn:aws:kms:us-west-2:846542577485:alias/aws/s3",
                            "environment.#": "1",
                            "environment.1622289142.certificate": "",
                            "environment.1622289142.compute_type": "BUILD_GENERAL1_SMALL",
                            "environment.1622289142.environment_variable.#": "0",
                            "environment.1622289142.image": "aws/codebuild/standard:2.0",
                            "environment.1622289142.privileged_mode": "false",
                            "environment.1622289142.type": "LINUX_CONTAINER",
                            "id": "arn:aws:codebuild:us-west-2:846542577485:project/codebuild-dotnet-slot-3",
                            "name": "codebuild-dotnet-slot-3",
                            "secondary_artifacts.#": "0",
                            "secondary_sources.#": "0",
                            "service_role": "arn:aws:iam::846542577485:role/codebuild-dotnet-role",
                            "source.#": "1",
                            "source.3421938844.auth.#": "0",
                            "source.3421938844.buildspec": "",
                            "source.3421938844.git_clone_depth": "0",
                            "source.3421938844.insecure_ssl": "false",
                            "source.3421938844.location": "arn:aws:s3:::deployment-packages-w2/codebuild/source/codebuild-dotnet-slot-3.zip",
                            "source.3421938844.report_build_status": "false",
                            "source.3421938844.type": "S3",
                            "tags.%": "4",
                            "tags.Application": "ALL",
                            "tags.Environment": "prod",
                            "tags.Terraform": "scm",
                            "tags.Zone": "dotnet_slotted_codebuild",
                            "vpc_config.#": "0"
                        },
                        "meta": {},
                        "tainted": false
                    },
                    "deposed": [],
                    "provider": "provider.aws"
                },
                "aws_dynamodb_table.slot_table": {
                    "type": "aws_dynamodb_table",
                    "depends_on": [],
                    "primary": {
                        "id": "codebuild-dotnet-slot_table",
                        "attributes": {
                            "arn": "arn:aws:dynamodb:us-west-2:846542577485:table/codebuild-dotnet-slot_table",
                            "attribute.#": "1",
                            "attribute.2470487362.name": "ComponentName",
                            "attribute.2470487362.type": "S",
                            "billing_mode": "PROVISIONED",
                            "global_secondary_index.#": "0",
                            "hash_key": "ComponentName",
                            "id": "codebuild-dotnet-slot_table",
                            "local_secondary_index.#": "0",
                            "name": "codebuild-dotnet-slot_table",
                            "point_in_time_recovery.#": "1",
                            "point_in_time_recovery.0.enabled": "false",
                            "read_capacity": "5",
                            "server_side_encryption.#": "0",
                            "stream_arn": "",
                            "stream_enabled": "false",
                            "stream_label": "",
                            "stream_view_type": "",
                            "tags.%": "4",
                            "tags.Application": "ALL",
                            "tags.Environment": "prod",
                            "tags.Terraform": "scm",
                            "tags.Zone": "dotnet_slotted_codebuild",
                            "ttl.#": "0",
                            "write_capacity": "5"
                        },
                        "meta": {
                            "e2bfb730-ecaa-11e6-8f88-34363bc7c4c0": {
                                "create": 600000000000,
                                "delete": 600000000000,
                                "update": 3600000000000
                            },
                            "schema_version": "1"
                        },
                        "tainted": false
                    },
                    "deposed": [],
                    "provider": "provider.aws"
                },
                "aws_iam_policy.codebuild_policy": {
                    "type": "aws_iam_policy",
                    "depends_on": [
                        "data.aws_caller_identity.current"
                    ],
                    "primary": {
                        "id": "arn:aws:iam::846542577485:policy/service-role/codebuild-dotnet-policy",
                        "attributes": {
                            "arn": "arn:aws:iam::846542577485:policy/service-role/codebuild-dotnet-policy",
                            "description": "Policy used in trust relationship with CodeBuild",
                            "id": "arn:aws:iam::846542577485:policy/service-role/codebuild-dotnet-policy",
                            "name": "codebuild-dotnet-policy",
                            "path": "/service-role/",
                            "policy": "{\n    \"Version\": \"2012-10-17\",\n    \"Statement\": [\n       {\n            \"Sid\": \"VisualEditor0\",\n            \"Effect\": \"Allow\",\n            \"Action\": [\n                \"s3:GetObject\",\n                \"s3:PutObject\",\n                \"s3:ListBucket\",\n\t\t\t\t        \"s3:GetObjectVersion\"\n            ],\n            \"Resource\": [\n              \"arn:aws:s3:::deployment-packages-w2\",\n              \"arn:aws:s3:::deployment-packages-w2/*\"\n            ]\n        },\n        {\n\n            \"Effect\": \"Allow\",\n            \"Action\": [\n                \"kms:ListAliases\",\n                \"kms:ListKeys\",\n                \"kms:Encrypt\",\n                \"kms:Decrypt\",\n                \"kms:ReEncrypt*\",\n                \"kms:GenerateDataKey*\",\n                \"kms:DescribeKey\"\n            ],\n            \"Resource\": [\n              \"arn:aws:kms:us-west-2:846542577485:key/b3a7437b-eb75-4570-ba0c-9cfafaca7815\"\n            ]\n        },\n        {\n            \"Sid\": \"VisualEditor4\",\n            \"Effect\": \"Allow\",\n            \"Action\": [\n                \"logs:CreateLogGroup\",\n                \"logs:CreateLogStream\",\n                \"logs:PutLogEvents\",\n                \"logs:DescribeLogStreams\"\n            ],\n            \"Resource\": [\n                \"*\"\n            ]\n        },\n        {\n            \"Sid\": \"VisualEditor6\",\n            \"Effect\": \"Allow\",\n            \"Action\": [\n                \"ecr:CreateRepository\",\n                \"ecr:GetAuthorizationToken\",\n                \"ecr:InitiateLayerUpload\",\n                \"ecr:UploadLayerPart\",\n                \"ecr:CompleteLayerUpload\",\n                \"ecr:BatchCheckLayerAvailability\",\n                \"ecr:PutImage\",\n                \"ecr:GetDownloadUrlForLayer\",\n                \"ecr:BatchGetImage\",\n                \"ecr:SetRepositoryPolicy\"\n            ],\n            \"Resource\": \"*\"\n        },\n        {\n            \"Sid\": \"VisualEditor7\",\n            \"Effect\": \"Allow\",\n            \"Action\": \"ssm:GetParameter\",\n            \"Resource\": [\n              \"arn:aws:ssm:us-west-2:846542577485:parameter/scm/*\",\n              \"arn:aws:ssm:us-east-1:846542577485:parameter/scm/*\",\n              \"arn:aws:ssm:us-west-2:846542577485:parameter/scm_packages/*\",\n              \"arn:aws:ssm:us-east-1:846542577485:parameter/scm_packages/*\"\n            ]\n        },\n        {\n            \"Effect\": \"Allow\",\n            \"Action\": \"ssm:GetParameters\",\n            \"Resource\": [\n              \"arn:aws:ssm:us-west-2:846542577485:parameter/aws/service/*\",\n              \"arn:aws:ssm:us-east-1:846542577485:parameter/aws/service/*\",\n              \"arn:aws:ssm:us-west-2::parameter/aws/service/*\",\n              \"arn:aws:ssm:us-east-1::parameter/aws/service/*\"\n            ]\n        },\n        {\n            \"Effect\": \"Allow\",\n            \"Action\" : [\n                \"ec2:AttachVolume\",\n                \"ec2:AuthorizeSecurityGroupIngress\",\n                \"ec2:CopyImage\",\n                \"ec2:CreateImage\",\n                \"ec2:CreateKeypair\",\n                \"ec2:CreateSecurityGroup\",\n                \"ec2:CreateSnapshot\",\n                \"ec2:CreateTags\",\n                \"ec2:CreateVolume\",\n                \"ec2:DeleteKeypair\",\n                \"ec2:DeleteSecurityGroup\",\n                \"ec2:DeleteSnapshot\",\n                \"ec2:DeleteVolume\",\n                \"ec2:DeregisterImage\",\n                \"ec2:DescribeImageAttribute\",\n                \"ec2:DescribeImages\",\n                \"ec2:DescribeInstances\",\n                \"ec2:DescribeInstanceStatus\",\n                \"ec2:DescribeRegions\",\n                \"ec2:DescribeSecurityGroups\",\n                \"ec2:DescribeSnapshots\",\n                \"ec2:DescribeSubnets\",\n                \"ec2:DescribeTags\",\n                \"ec2:DescribeVolumes\",\n                \"ec2:DetachVolume\",\n                \"ec2:GetPasswordData\",\n                \"ec2:ModifyImageAttribute\",\n                \"ec2:ModifyInstanceAttribute\",\n                \"ec2:ModifySnapshotAttribute\",\n                \"ec2:RegisterImage\",\n                \"ec2:RunInstances\",\n                \"ec2:StopInstances\",\n                \"ec2:TerminateInstances\"\n              ],\n            \"Resource\": \"*\"\n        }\n  ]\n}\n"
                        },
                        "meta": {},
                        "tainted": false
                    },
                    "deposed": [],
                    "provider": "provider.aws"
                },
                "aws_iam_policy_attachment.codebuild_policy_attachment": {
                    "type": "aws_iam_policy_attachment",
                    "depends_on": [
                        "aws_iam_policy.codebuild_policy",
                        "aws_iam_role.codebuild_role"
                    ],
                    "primary": {
                        "id": "codebuild-dotnet-policy-attachment",
                        "attributes": {
                            "groups.#": "0",
                            "id": "codebuild-dotnet-policy-attachment",
                            "name": "codebuild-dotnet-policy-attachment",
                            "policy_arn": "arn:aws:iam::846542577485:policy/service-role/codebuild-dotnet-policy",
                            "roles.#": "1",
                            "roles.4255454917": "codebuild-dotnet-role",
                            "users.#": "0"
                        },
                        "meta": {},
                        "tainted": false
                    },
                    "deposed": [],
                    "provider": "provider.aws"
                },
                "aws_iam_role.codebuild_role": {
                    "type": "aws_iam_role",
                    "depends_on": [],
                    "primary": {
                        "id": "codebuild-dotnet-role",
                        "attributes": {
                            "arn": "arn:aws:iam::846542577485:role/codebuild-dotnet-role",
                            "assume_role_policy": "{\"Version\":\"2012-10-17\",\"Statement\":[{\"Effect\":\"Allow\",\"Principal\":{\"Service\":\"codebuild.amazonaws.com\"},\"Action\":\"sts:AssumeRole\"}]}",
                            "create_date": "2019-07-17T19:11:59Z",
                            "description": "",
                            "force_detach_policies": "false",
                            "id": "codebuild-dotnet-role",
                            "max_session_duration": "3600",
                            "name": "codebuild-dotnet-role",
                            "path": "/",
                            "tags.%": "0",
                            "unique_id": "AROA4KGO6T5GV2MYSHHIF"
                        },
                        "meta": {},
                        "tainted": false
                    },
                    "deposed": [],
                    "provider": "provider.aws"
                },
                "data.aws_caller_identity.current": {
                    "type": "aws_caller_identity",
                    "depends_on": [],
                    "primary": {
                        "id": "2019-07-17 19:11:22.6705573 +0000 UTC",
                        "attributes": {
                            "account_id": "846542577485",
                            "arn": "arn:aws:iam::846542577485:user/khatibinil",
                            "id": "2019-07-17 19:11:22.6705573 +0000 UTC",
                            "user_id": "AIDAJRWUITJLOOC2D7VA6"
                        },
                        "meta": {},
                        "tainted": false
                    },
                    "deposed": [],
                    "provider": "provider.aws"
                },
                "data.template_file.init_slots_powershell": {
                    "type": "template_file",
                    "depends_on": [
                        "aws_codebuild_project.codebuild_project"
                    ],
                    "primary": {
                        "id": "c42e10a3a1190cbb6c34ddebdc9a0d65e3c875161c4cba31963bbe82634d3771",
                        "attributes": {
                            "id": "c42e10a3a1190cbb6c34ddebdc9a0d65e3c875161c4cba31963bbe82634d3771",
                            "rendered": "function run-native($command) { \u0026 $command ($args -replace'(\\\\*)\"','$1$1\\\"') }\r\n#$region =\"us-west-2\"\r\n$count=4\r\n$slots=@()\r\nwhile ($count -gt 0){\r\n    $slots+=\"codebuild-dotnet-slot-{0}\" -f $count\r\n    $count--\r\n}\r\n\r\nforeach ($slot in $slots) \r\n{\r\n    $j = @{\r\n        ComponentName = @{\r\n            S=\"$slot\"\r\n            }\r\n        }\r\n    $keyjson = ConvertTo-Json $j\r\n    $output =  run-native aws dynamodb get-item `\r\n        --table-name \"codebuild-dotnet-slot_table\" --region us-west-2 `\r\n        --key $keyjson `\r\n        --projection-expression \"SlotFamily, cv\" --profile khatibinil\r\n    \r\n    if( -not $output) \r\n    {      \r\n        #use powershell to build JSON\r\n        $j = @{\r\n            ComponentName = @{\r\n                S=\"$slot\"\r\n            }\r\n            SlotFamily = @{\r\n            S=\"codebuild-dotnet-slot\"\r\n            }\r\n            cv = @{\r\n                N=\"0\"\r\n            }\r\n        }\r\n        $itemjson = ConvertTo-Json $j\r\n\r\n        run-native aws dynamodb put-item `\r\n        --table-name \"codebuild-dotnet-slot_table\"  --region us-west-2 `\r\n        --item $itemjson `\r\n        --return-values ALL_OLD `\r\n        --profile khatibinil\r\n    }\r\n\r\n}",
                            "template": "function run-native($command) { \u0026 $command ($args -replace'(\\\\*)\"','$1$1\\\"') }\r\n#$region =\"us-west-2\"\r\n$count=${count}\r\n$slots=@()\r\nwhile ($count -gt 0){\r\n    $slots+=\"${slot_family}-slot-{0}\" -f $count\r\n    $count--\r\n}\r\n\r\nforeach ($slot in $slots) \r\n{\r\n    $j = @{\r\n        ComponentName = @{\r\n            S=\"$slot\"\r\n            }\r\n        }\r\n    $keyjson = ConvertTo-Json $j\r\n    $output =  run-native aws dynamodb get-item `\r\n        --table-name \"${slot_family}-slot_table\" --region ${aws_region} `\r\n        --key $keyjson `\r\n        --projection-expression \"SlotFamily, cv\" --profile ${aws_profile}\r\n    \r\n    if( -not $output) \r\n    {      \r\n        #use powershell to build JSON\r\n        $j = @{\r\n            ComponentName = @{\r\n                S=\"$slot\"\r\n            }\r\n            SlotFamily = @{\r\n            S=\"${slot_family}-slot\"\r\n            }\r\n            cv = @{\r\n                N=\"0\"\r\n            }\r\n        }\r\n        $itemjson = ConvertTo-Json $j\r\n\r\n        run-native aws dynamodb put-item `\r\n        --table-name \"${slot_family}-slot_table\"  --region ${aws_region} `\r\n        --item $itemjson `\r\n        --return-values ALL_OLD `\r\n        --profile ${aws_profile}\r\n    }\r\n\r\n}",
                            "vars.%": "4",
                            "vars.aws_profile": "khatibinil",
                            "vars.aws_region": "us-west-2",
                            "vars.count": "4",
                            "vars.slot_family": "codebuild-dotnet"
                        },
                        "meta": {},
                        "tainted": false
                    },
                    "deposed": [],
                    "provider": "provider.template"
                },
                "local_file.init_slots_powershell": {
                    "type": "local_file",
                    "depends_on": [
                        "data.template_file.init_slots_powershell"
                    ],
                    "primary": {
                        "id": "ac26b5e05022465c3a5f7733e0050649c3993497",
                        "attributes": {
                            "content": "function run-native($command) { \u0026 $command ($args -replace'(\\\\*)\"','$1$1\\\"') }\r\n#$region =\"us-west-2\"\r\n$count=4\r\n$slots=@()\r\nwhile ($count -gt 0){\r\n    $slots+=\"codebuild-dotnet-slot-{0}\" -f $count\r\n    $count--\r\n}\r\n\r\nforeach ($slot in $slots) \r\n{\r\n    $j = @{\r\n        ComponentName = @{\r\n            S=\"$slot\"\r\n            }\r\n        }\r\n    $keyjson = ConvertTo-Json $j\r\n    $output =  run-native aws dynamodb get-item `\r\n        --table-name \"codebuild-dotnet-slot_table\" --region us-west-2 `\r\n        --key $keyjson `\r\n        --projection-expression \"SlotFamily, cv\" --profile khatibinil\r\n    \r\n    if( -not $output) \r\n    {      \r\n        #use powershell to build JSON\r\n        $j = @{\r\n            ComponentName = @{\r\n                S=\"$slot\"\r\n            }\r\n            SlotFamily = @{\r\n            S=\"codebuild-dotnet-slot\"\r\n            }\r\n            cv = @{\r\n                N=\"0\"\r\n            }\r\n        }\r\n        $itemjson = ConvertTo-Json $j\r\n\r\n        run-native aws dynamodb put-item `\r\n        --table-name \"codebuild-dotnet-slot_table\"  --region us-west-2 `\r\n        --item $itemjson `\r\n        --return-values ALL_OLD `\r\n        --profile khatibinil\r\n    }\r\n\r\n}",
                            "filename": "C:\\VSTS\\SCM\\slotted-codebuilds.terraform\\.terraform\\modules\\f18fe63bf371bbcdcc68e34f5f8231f4/init-slots-build-codebuild-dotnet.ps1",
                            "id": "ac26b5e05022465c3a5f7733e0050649c3993497"
                        },
                        "meta": {},
                        "tainted": false
                    },
                    "deposed": [],
                    "provider": "provider.local"
                },
                "null_resource.init_slots": {
                    "type": "null_resource",
                    "depends_on": [
                        "data.template_file.init_slots_powershell"
                    ],
                    "primary": {
                        "id": "1582007168905902529",
                        "attributes": {
                            "id": "1582007168905902529",
                            "triggers.%": "1",
                            "triggers.test": "function run-native($command) { \u0026 $command ($args -replace'(\\\\*)\"','$1$1\\\"') }\r\n#$region =\"us-west-2\"\r\n$count=4\r\n$slots=@()\r\nwhile ($count -gt 0){\r\n    $slots+=\"codebuild-dotnet-slot-{0}\" -f $count\r\n    $count--\r\n}\r\n\r\nforeach ($slot in $slots) \r\n{\r\n    $j = @{\r\n        ComponentName = @{\r\n            S=\"$slot\"\r\n            }\r\n        }\r\n    $keyjson = ConvertTo-Json $j\r\n    $output =  run-native aws dynamodb get-item `\r\n        --table-name \"codebuild-dotnet-slot_table\" --region us-west-2 `\r\n        --key $keyjson `\r\n        --projection-expression \"SlotFamily, cv\" --profile khatibinil\r\n    \r\n    if( -not $output) \r\n    {      \r\n        #use powershell to build JSON\r\n        $j = @{\r\n            ComponentName = @{\r\n                S=\"$slot\"\r\n            }\r\n            SlotFamily = @{\r\n            S=\"codebuild-dotnet-slot\"\r\n            }\r\n            cv = @{\r\n                N=\"0\"\r\n            }\r\n        }\r\n        $itemjson = ConvertTo-Json $j\r\n\r\n        run-native aws dynamodb put-item `\r\n        --table-name \"codebuild-dotnet-slot_table\"  --region us-west-2 `\r\n        --item $itemjson `\r\n        --return-values ALL_OLD `\r\n        --profile khatibinil\r\n    }\r\n\r\n}"
                        },
                        "meta": {},
                        "tainted": false
                    },
                    "deposed": [],
                    "provider": "provider.null"
                }
            },
            "depends_on": []
        },
        {
            "path": [
                "root",
                "nodejs_slotted_codebuild"
            ],
            "outputs": {
                "code_build_slots": {
                    "sensitive": false,
                    "type": "list",
                    "value": [
                        "codebuild-nodejs-slot-0",
                        "codebuild-nodejs-slot-1",
                        "codebuild-nodejs-slot-2",
                        "codebuild-nodejs-slot-3"
                    ]
                },
                "dynamodb_table_arn": {
                    "sensitive": false,
                    "type": "string",
                    "value": "arn:aws:dynamodb:us-west-2:846542577485:table/codebuild-nodejs-slot_table"
                }
            },
            "resources": {
                "aws_codebuild_project.codebuild_project.0": {
                    "type": "aws_codebuild_project",
                    "depends_on": [
                        "aws_iam_role.codebuild_role"
                    ],
                    "primary": {
                        "id": "arn:aws:codebuild:us-west-2:846542577485:project/codebuild-nodejs-slot-0",
                        "attributes": {
                            "arn": "arn:aws:codebuild:us-west-2:846542577485:project/codebuild-nodejs-slot-0",
                            "artifacts.#": "1",
                            "artifacts.1178773975.encryption_disabled": "false",
                            "artifacts.1178773975.location": "",
                            "artifacts.1178773975.name": "",
                            "artifacts.1178773975.namespace_type": "",
                            "artifacts.1178773975.packaging": "",
                            "artifacts.1178773975.path": "",
                            "artifacts.1178773975.type": "NO_ARTIFACTS",
                            "badge_enabled": "false",
                            "badge_url": "",
                            "build_timeout": "120",
                            "cache.#": "1",
                            "cache.0.location": "",
                            "cache.0.type": "NO_CACHE",
                            "description": "code build project for codebuild-nodejs-0",
                            "encryption_key": "arn:aws:kms:us-west-2:846542577485:alias/aws/s3",
                            "environment.#": "1",
                            "environment.1622289142.certificate": "",
                            "environment.1622289142.compute_type": "BUILD_GENERAL1_SMALL",
                            "environment.1622289142.environment_variable.#": "0",
                            "environment.1622289142.image": "aws/codebuild/standard:2.0",
                            "environment.1622289142.privileged_mode": "false",
                            "environment.1622289142.type": "LINUX_CONTAINER",
                            "id": "arn:aws:codebuild:us-west-2:846542577485:project/codebuild-nodejs-slot-0",
                            "name": "codebuild-nodejs-slot-0",
                            "secondary_artifacts.#": "0",
                            "secondary_sources.#": "0",
                            "service_role": "arn:aws:iam::846542577485:role/codebuild-nodejs-role",
                            "source.#": "1",
                            "source.533012454.auth.#": "0",
                            "source.533012454.buildspec": "",
                            "source.533012454.git_clone_depth": "0",
                            "source.533012454.insecure_ssl": "false",
                            "source.533012454.location": "arn:aws:s3:::deployment-packages-w2/codebuild/source/codebuild-nodejs-slot-0.zip",
                            "source.533012454.report_build_status": "false",
                            "source.533012454.type": "S3",
                            "tags.%": "4",
                            "tags.Application": "ALL",
                            "tags.Environment": "prod",
                            "tags.Terraform": "scm",
                            "tags.Zone": "nodejs_slotted_codebuild",
                            "vpc_config.#": "0"
                        },
                        "meta": {},
                        "tainted": false
                    },
                    "deposed": [],
                    "provider": "provider.aws"
                },
                "aws_codebuild_project.codebuild_project.1": {
                    "type": "aws_codebuild_project",
                    "depends_on": [
                        "aws_iam_role.codebuild_role"
                    ],
                    "primary": {
                        "id": "arn:aws:codebuild:us-west-2:846542577485:project/codebuild-nodejs-slot-1",
                        "attributes": {
                            "arn": "arn:aws:codebuild:us-west-2:846542577485:project/codebuild-nodejs-slot-1",
                            "artifacts.#": "1",
                            "artifacts.1178773975.encryption_disabled": "false",
                            "artifacts.1178773975.location": "",
                            "artifacts.1178773975.name": "",
                            "artifacts.1178773975.namespace_type": "",
                            "artifacts.1178773975.packaging": "",
                            "artifacts.1178773975.path": "",
                            "artifacts.1178773975.type": "NO_ARTIFACTS",
                            "badge_enabled": "false",
                            "badge_url": "",
                            "build_timeout": "120",
                            "cache.#": "1",
                            "cache.0.location": "",
                            "cache.0.type": "NO_CACHE",
                            "description": "code build project for codebuild-nodejs-1",
                            "encryption_key": "arn:aws:kms:us-west-2:846542577485:alias/aws/s3",
                            "environment.#": "1",
                            "environment.1622289142.certificate": "",
                            "environment.1622289142.compute_type": "BUILD_GENERAL1_SMALL",
                            "environment.1622289142.environment_variable.#": "0",
                            "environment.1622289142.image": "aws/codebuild/standard:2.0",
                            "environment.1622289142.privileged_mode": "false",
                            "environment.1622289142.type": "LINUX_CONTAINER",
                            "id": "arn:aws:codebuild:us-west-2:846542577485:project/codebuild-nodejs-slot-1",
                            "name": "codebuild-nodejs-slot-1",
                            "secondary_artifacts.#": "0",
                            "secondary_sources.#": "0",
                            "service_role": "arn:aws:iam::846542577485:role/codebuild-nodejs-role",
                            "source.#": "1",
                            "source.2057446560.auth.#": "0",
                            "source.2057446560.buildspec": "",
                            "source.2057446560.git_clone_depth": "0",
                            "source.2057446560.insecure_ssl": "false",
                            "source.2057446560.location": "arn:aws:s3:::deployment-packages-w2/codebuild/source/codebuild-nodejs-slot-1.zip",
                            "source.2057446560.report_build_status": "false",
                            "source.2057446560.type": "S3",
                            "tags.%": "4",
                            "tags.Application": "ALL",
                            "tags.Environment": "prod",
                            "tags.Terraform": "scm",
                            "tags.Zone": "nodejs_slotted_codebuild",
                            "vpc_config.#": "0"
                        },
                        "meta": {},
                        "tainted": false
                    },
                    "deposed": [],
                    "provider": "provider.aws"
                },
                "aws_codebuild_project.codebuild_project.2": {
                    "type": "aws_codebuild_project",
                    "depends_on": [
                        "aws_iam_role.codebuild_role"
                    ],
                    "primary": {
                        "id": "arn:aws:codebuild:us-west-2:846542577485:project/codebuild-nodejs-slot-2",
                        "attributes": {
                            "arn": "arn:aws:codebuild:us-west-2:846542577485:project/codebuild-nodejs-slot-2",
                            "artifacts.#": "1",
                            "artifacts.1178773975.encryption_disabled": "false",
                            "artifacts.1178773975.location": "",
                            "artifacts.1178773975.name": "",
                            "artifacts.1178773975.namespace_type": "",
                            "artifacts.1178773975.packaging": "",
                            "artifacts.1178773975.path": "",
                            "artifacts.1178773975.type": "NO_ARTIFACTS",
                            "badge_enabled": "false",
                            "badge_url": "",
                            "build_timeout": "120",
                            "cache.#": "1",
                            "cache.0.location": "",
                            "cache.0.type": "NO_CACHE",
                            "description": "code build project for codebuild-nodejs-2",
                            "encryption_key": "arn:aws:kms:us-west-2:846542577485:alias/aws/s3",
                            "environment.#": "1",
                            "environment.1622289142.certificate": "",
                            "environment.1622289142.compute_type": "BUILD_GENERAL1_SMALL",
                            "environment.1622289142.environment_variable.#": "0",
                            "environment.1622289142.image": "aws/codebuild/standard:2.0",
                            "environment.1622289142.privileged_mode": "false",
                            "environment.1622289142.type": "LINUX_CONTAINER",
                            "id": "arn:aws:codebuild:us-west-2:846542577485:project/codebuild-nodejs-slot-2",
                            "name": "codebuild-nodejs-slot-2",
                            "secondary_artifacts.#": "0",
                            "secondary_sources.#": "0",
                            "service_role": "arn:aws:iam::846542577485:role/codebuild-nodejs-role",
                            "source.#": "1",
                            "source.3574294890.auth.#": "0",
                            "source.3574294890.buildspec": "",
                            "source.3574294890.git_clone_depth": "0",
                            "source.3574294890.insecure_ssl": "false",
                            "source.3574294890.location": "arn:aws:s3:::deployment-packages-w2/codebuild/source/codebuild-nodejs-slot-2.zip",
                            "source.3574294890.report_build_status": "false",
                            "source.3574294890.type": "S3",
                            "tags.%": "4",
                            "tags.Application": "ALL",
                            "tags.Environment": "prod",
                            "tags.Terraform": "scm",
                            "tags.Zone": "nodejs_slotted_codebuild",
                            "vpc_config.#": "0"
                        },
                        "meta": {},
                        "tainted": false
                    },
                    "deposed": [],
                    "provider": "provider.aws"
                },
                "aws_codebuild_project.codebuild_project.3": {
                    "type": "aws_codebuild_project",
                    "depends_on": [
                        "aws_iam_role.codebuild_role"
                    ],
                    "primary": {
                        "id": "arn:aws:codebuild:us-west-2:846542577485:project/codebuild-nodejs-slot-3",
                        "attributes": {
                            "arn": "arn:aws:codebuild:us-west-2:846542577485:project/codebuild-nodejs-slot-3",
                            "artifacts.#": "1",
                            "artifacts.1178773975.encryption_disabled": "false",
                            "artifacts.1178773975.location": "",
                            "artifacts.1178773975.name": "",
                            "artifacts.1178773975.namespace_type": "",
                            "artifacts.1178773975.packaging": "",
                            "artifacts.1178773975.path": "",
                            "artifacts.1178773975.type": "NO_ARTIFACTS",
                            "badge_enabled": "false",
                            "badge_url": "",
                            "build_timeout": "120",
                            "cache.#": "1",
                            "cache.0.location": "",
                            "cache.0.type": "NO_CACHE",
                            "description": "code build project for codebuild-nodejs-3",
                            "encryption_key": "arn:aws:kms:us-west-2:846542577485:alias/aws/s3",
                            "environment.#": "1",
                            "environment.1622289142.certificate": "",
                            "environment.1622289142.compute_type": "BUILD_GENERAL1_SMALL",
                            "environment.1622289142.environment_variable.#": "0",
                            "environment.1622289142.image": "aws/codebuild/standard:2.0",
                            "environment.1622289142.privileged_mode": "false",
                            "environment.1622289142.type": "LINUX_CONTAINER",
                            "id": "arn:aws:codebuild:us-west-2:846542577485:project/codebuild-nodejs-slot-3",
                            "name": "codebuild-nodejs-slot-3",
                            "secondary_artifacts.#": "0",
                            "secondary_sources.#": "0",
                            "service_role": "arn:aws:iam::846542577485:role/codebuild-nodejs-role",
                            "source.#": "1",
                            "source.2959888940.auth.#": "0",
                            "source.2959888940.buildspec": "",
                            "source.2959888940.git_clone_depth": "0",
                            "source.2959888940.insecure_ssl": "false",
                            "source.2959888940.location": "arn:aws:s3:::deployment-packages-w2/codebuild/source/codebuild-nodejs-slot-3.zip",
                            "source.2959888940.report_build_status": "false",
                            "source.2959888940.type": "S3",
                            "tags.%": "4",
                            "tags.Application": "ALL",
                            "tags.Environment": "prod",
                            "tags.Terraform": "scm",
                            "tags.Zone": "nodejs_slotted_codebuild",
                            "vpc_config.#": "0"
                        },
                        "meta": {},
                        "tainted": false
                    },
                    "deposed": [],
                    "provider": "provider.aws"
                },
                "aws_dynamodb_table.slot_table": {
                    "type": "aws_dynamodb_table",
                    "depends_on": [],
                    "primary": {
                        "id": "codebuild-nodejs-slot_table",
                        "attributes": {
                            "arn": "arn:aws:dynamodb:us-west-2:846542577485:table/codebuild-nodejs-slot_table",
                            "attribute.#": "1",
                            "attribute.2470487362.name": "ComponentName",
                            "attribute.2470487362.type": "S",
                            "billing_mode": "PROVISIONED",
                            "global_secondary_index.#": "0",
                            "hash_key": "ComponentName",
                            "id": "codebuild-nodejs-slot_table",
                            "local_secondary_index.#": "0",
                            "name": "codebuild-nodejs-slot_table",
                            "point_in_time_recovery.#": "1",
                            "point_in_time_recovery.0.enabled": "false",
                            "read_capacity": "5",
                            "server_side_encryption.#": "0",
                            "stream_arn": "",
                            "stream_enabled": "false",
                            "stream_label": "",
                            "stream_view_type": "",
                            "tags.%": "4",
                            "tags.Application": "ALL",
                            "tags.Environment": "prod",
                            "tags.Terraform": "scm",
                            "tags.Zone": "nodejs_slotted_codebuild",
                            "ttl.#": "0",
                            "write_capacity": "5"
                        },
                        "meta": {
                            "e2bfb730-ecaa-11e6-8f88-34363bc7c4c0": {
                                "create": 600000000000,
                                "delete": 600000000000,
                                "update": 3600000000000
                            },
                            "schema_version": "1"
                        },
                        "tainted": false
                    },
                    "deposed": [],
                    "provider": "provider.aws"
                },
                "aws_iam_policy.codebuild_policy": {
                    "type": "aws_iam_policy",
                    "depends_on": [
                        "data.aws_caller_identity.current"
                    ],
                    "primary": {
                        "id": "arn:aws:iam::846542577485:policy/service-role/codebuild-nodejs-policy",
                        "attributes": {
                            "arn": "arn:aws:iam::846542577485:policy/service-role/codebuild-nodejs-policy",
                            "description": "Policy used in trust relationship with CodeBuild",
                            "id": "arn:aws:iam::846542577485:policy/service-role/codebuild-nodejs-policy",
                            "name": "codebuild-nodejs-policy",
                            "path": "/service-role/",
                            "policy": "{\n    \"Version\": \"2012-10-17\",\n    \"Statement\": [\n       {\n            \"Sid\": \"VisualEditor0\",\n            \"Effect\": \"Allow\",\n            \"Action\": [\n                \"s3:GetObject\",\n                \"s3:PutObject\",\n                \"s3:ListBucket\",\n\t\t\t\t        \"s3:GetObjectVersion\"\n            ],\n            \"Resource\": [\n              \"arn:aws:s3:::deployment-packages-w2\",\n              \"arn:aws:s3:::deployment-packages-w2/*\"\n            ]\n        },\n        {\n\n            \"Effect\": \"Allow\",\n            \"Action\": [\n                \"kms:ListAliases\",\n                \"kms:ListKeys\",\n                \"kms:Encrypt\",\n                \"kms:Decrypt\",\n                \"kms:ReEncrypt*\",\n                \"kms:GenerateDataKey*\",\n                \"kms:DescribeKey\"\n            ],\n            \"Resource\": [\n              \"arn:aws:kms:us-west-2:846542577485:key/b3a7437b-eb75-4570-ba0c-9cfafaca7815\"\n            ]\n        },\n        {\n            \"Sid\": \"VisualEditor4\",\n            \"Effect\": \"Allow\",\n            \"Action\": [\n                \"logs:CreateLogGroup\",\n                \"logs:CreateLogStream\",\n                \"logs:PutLogEvents\",\n                \"logs:DescribeLogStreams\"\n            ],\n            \"Resource\": [\n                \"*\"\n            ]\n        },\n        {\n            \"Sid\": \"VisualEditor6\",\n            \"Effect\": \"Allow\",\n            \"Action\": [\n                \"ecr:CreateRepository\",\n                \"ecr:GetAuthorizationToken\",\n                \"ecr:InitiateLayerUpload\",\n                \"ecr:UploadLayerPart\",\n                \"ecr:CompleteLayerUpload\",\n                \"ecr:BatchCheckLayerAvailability\",\n                \"ecr:PutImage\",\n                \"ecr:GetDownloadUrlForLayer\",\n                \"ecr:BatchGetImage\",\n                \"ecr:SetRepositoryPolicy\"\n            ],\n            \"Resource\": \"*\"\n        },\n        {\n            \"Sid\": \"VisualEditor7\",\n            \"Effect\": \"Allow\",\n            \"Action\": \"ssm:GetParameter\",\n            \"Resource\": [\n              \"arn:aws:ssm:us-west-2:846542577485:parameter/scm/*\",\n              \"arn:aws:ssm:us-east-1:846542577485:parameter/scm/*\",\n              \"arn:aws:ssm:us-west-2:846542577485:parameter/scm_packages/*\",\n              \"arn:aws:ssm:us-east-1:846542577485:parameter/scm_packages/*\"\n            ]\n        },\n        {\n            \"Effect\": \"Allow\",\n            \"Action\": \"ssm:GetParameters\",\n            \"Resource\": [\n              \"arn:aws:ssm:us-west-2:846542577485:parameter/aws/service/*\",\n              \"arn:aws:ssm:us-east-1:846542577485:parameter/aws/service/*\",\n              \"arn:aws:ssm:us-west-2::parameter/aws/service/*\",\n              \"arn:aws:ssm:us-east-1::parameter/aws/service/*\"\n            ]\n        },\n        {\n            \"Effect\": \"Allow\",\n            \"Action\" : [\n                \"ec2:AttachVolume\",\n                \"ec2:AuthorizeSecurityGroupIngress\",\n                \"ec2:CopyImage\",\n                \"ec2:CreateImage\",\n                \"ec2:CreateKeypair\",\n                \"ec2:CreateSecurityGroup\",\n                \"ec2:CreateSnapshot\",\n                \"ec2:CreateTags\",\n                \"ec2:CreateVolume\",\n                \"ec2:DeleteKeypair\",\n                \"ec2:DeleteSecurityGroup\",\n                \"ec2:DeleteSnapshot\",\n                \"ec2:DeleteVolume\",\n                \"ec2:DeregisterImage\",\n                \"ec2:DescribeImageAttribute\",\n                \"ec2:DescribeImages\",\n                \"ec2:DescribeInstances\",\n                \"ec2:DescribeInstanceStatus\",\n                \"ec2:DescribeRegions\",\n                \"ec2:DescribeSecurityGroups\",\n                \"ec2:DescribeSnapshots\",\n                \"ec2:DescribeSubnets\",\n                \"ec2:DescribeTags\",\n                \"ec2:DescribeVolumes\",\n                \"ec2:DetachVolume\",\n                \"ec2:GetPasswordData\",\n                \"ec2:ModifyImageAttribute\",\n                \"ec2:ModifyInstanceAttribute\",\n                \"ec2:ModifySnapshotAttribute\",\n                \"ec2:RegisterImage\",\n                \"ec2:RunInstances\",\n                \"ec2:StopInstances\",\n                \"ec2:TerminateInstances\"\n              ],\n            \"Resource\": \"*\"\n        }\n  ]\n}\n"
                        },
                        "meta": {},
                        "tainted": false
                    },
                    "deposed": [],
                    "provider": "provider.aws"
                },
                "aws_iam_policy_attachment.codebuild_policy_attachment": {
                    "type": "aws_iam_policy_attachment",
                    "depends_on": [
                        "aws_iam_policy.codebuild_policy",
                        "aws_iam_role.codebuild_role"
                    ],
                    "primary": {
                        "id": "codebuild-nodejs-policy-attachment",
                        "attributes": {
                            "groups.#": "0",
                            "id": "codebuild-nodejs-policy-attachment",
                            "name": "codebuild-nodejs-policy-attachment",
                            "policy_arn": "arn:aws:iam::846542577485:policy/service-role/codebuild-nodejs-policy",
                            "roles.#": "1",
                            "roles.99438647": "codebuild-nodejs-role",
                            "users.#": "0"
                        },
                        "meta": {},
                        "tainted": false
                    },
                    "deposed": [],
                    "provider": "provider.aws"
                },
                "aws_iam_role.codebuild_role": {
                    "type": "aws_iam_role",
                    "depends_on": [],
                    "primary": {
                        "id": "codebuild-nodejs-role",
                        "attributes": {
                            "arn": "arn:aws:iam::846542577485:role/codebuild-nodejs-role",
                            "assume_role_policy": "{\"Version\":\"2012-10-17\",\"Statement\":[{\"Effect\":\"Allow\",\"Principal\":{\"Service\":\"codebuild.amazonaws.com\"},\"Action\":\"sts:AssumeRole\"}]}",
                            "create_date": "2019-07-17T19:11:47Z",
                            "description": "",
                            "force_detach_policies": "false",
                            "id": "codebuild-nodejs-role",
                            "max_session_duration": "3600",
                            "name": "codebuild-nodejs-role",
                            "path": "/",
                            "tags.%": "0",
                            "unique_id": "AROA4KGO6T5GQGXL7BAJU"
                        },
                        "meta": {},
                        "tainted": false
                    },
                    "deposed": [],
                    "provider": "provider.aws"
                },
                "data.aws_caller_identity.current": {
                    "type": "aws_caller_identity",
                    "depends_on": [],
                    "primary": {
                        "id": "2019-07-17 19:11:22.6735599 +0000 UTC",
                        "attributes": {
                            "account_id": "846542577485",
                            "arn": "arn:aws:iam::846542577485:user/khatibinil",
                            "id": "2019-07-17 19:11:22.6735599 +0000 UTC",
                            "user_id": "AIDAJRWUITJLOOC2D7VA6"
                        },
                        "meta": {},
                        "tainted": false
                    },
                    "deposed": [],
                    "provider": "provider.aws"
                },
                "data.template_file.init_slots_powershell": {
                    "type": "template_file",
                    "depends_on": [
                        "aws_codebuild_project.codebuild_project"
                    ],
                    "primary": {
                        "id": "5295639a797dfdbd590a417ea285cb00d1968f9fdbf6c474f786de2818e9dca0",
                        "attributes": {
                            "id": "5295639a797dfdbd590a417ea285cb00d1968f9fdbf6c474f786de2818e9dca0",
                            "rendered": "function run-native($command) { \u0026 $command ($args -replace'(\\\\*)\"','$1$1\\\"') }\r\n#$region =\"us-west-2\"\r\n$count=4\r\n$slots=@()\r\nwhile ($count -gt 0){\r\n    $slots+=\"codebuild-nodejs-slot-{0}\" -f $count\r\n    $count--\r\n}\r\n\r\nforeach ($slot in $slots) \r\n{\r\n    $j = @{\r\n        ComponentName = @{\r\n            S=\"$slot\"\r\n            }\r\n        }\r\n    $keyjson = ConvertTo-Json $j\r\n    $output =  run-native aws dynamodb get-item `\r\n        --table-name \"codebuild-nodejs-slot_table\" --region us-west-2 `\r\n        --key $keyjson `\r\n        --projection-expression \"SlotFamily, cv\" --profile khatibinil\r\n    \r\n    if( -not $output) \r\n    {      \r\n        #use powershell to build JSON\r\n        $j = @{\r\n            ComponentName = @{\r\n                S=\"$slot\"\r\n            }\r\n            SlotFamily = @{\r\n            S=\"codebuild-nodejs-slot\"\r\n            }\r\n            cv = @{\r\n                N=\"0\"\r\n            }\r\n        }\r\n        $itemjson = ConvertTo-Json $j\r\n\r\n        run-native aws dynamodb put-item `\r\n        --table-name \"codebuild-nodejs-slot_table\"  --region us-west-2 `\r\n        --item $itemjson `\r\n        --return-values ALL_OLD `\r\n        --profile khatibinil\r\n    }\r\n\r\n}",
                            "template": "function run-native($command) { \u0026 $command ($args -replace'(\\\\*)\"','$1$1\\\"') }\r\n#$region =\"us-west-2\"\r\n$count=${count}\r\n$slots=@()\r\nwhile ($count -gt 0){\r\n    $slots+=\"${slot_family}-slot-{0}\" -f $count\r\n    $count--\r\n}\r\n\r\nforeach ($slot in $slots) \r\n{\r\n    $j = @{\r\n        ComponentName = @{\r\n            S=\"$slot\"\r\n            }\r\n        }\r\n    $keyjson = ConvertTo-Json $j\r\n    $output =  run-native aws dynamodb get-item `\r\n        --table-name \"${slot_family}-slot_table\" --region ${aws_region} `\r\n        --key $keyjson `\r\n        --projection-expression \"SlotFamily, cv\" --profile ${aws_profile}\r\n    \r\n    if( -not $output) \r\n    {      \r\n        #use powershell to build JSON\r\n        $j = @{\r\n            ComponentName = @{\r\n                S=\"$slot\"\r\n            }\r\n            SlotFamily = @{\r\n            S=\"${slot_family}-slot\"\r\n            }\r\n            cv = @{\r\n                N=\"0\"\r\n            }\r\n        }\r\n        $itemjson = ConvertTo-Json $j\r\n\r\n        run-native aws dynamodb put-item `\r\n        --table-name \"${slot_family}-slot_table\"  --region ${aws_region} `\r\n        --item $itemjson `\r\n        --return-values ALL_OLD `\r\n        --profile ${aws_profile}\r\n    }\r\n\r\n}",
                            "vars.%": "4",
                            "vars.aws_profile": "khatibinil",
                            "vars.aws_region": "us-west-2",
                            "vars.count": "4",
                            "vars.slot_family": "codebuild-nodejs"
                        },
                        "meta": {},
                        "tainted": false
                    },
                    "deposed": [],
                    "provider": "provider.template"
                },
                "local_file.init_slots_powershell": {
                    "type": "local_file",
                    "depends_on": [
                        "data.template_file.init_slots_powershell"
                    ],
                    "primary": {
                        "id": "1c7c51efef2f25762c3c13089bc1627e29321706",
                        "attributes": {
                            "content": "function run-native($command) { \u0026 $command ($args -replace'(\\\\*)\"','$1$1\\\"') }\r\n#$region =\"us-west-2\"\r\n$count=4\r\n$slots=@()\r\nwhile ($count -gt 0){\r\n    $slots+=\"codebuild-nodejs-slot-{0}\" -f $count\r\n    $count--\r\n}\r\n\r\nforeach ($slot in $slots) \r\n{\r\n    $j = @{\r\n        ComponentName = @{\r\n            S=\"$slot\"\r\n            }\r\n        }\r\n    $keyjson = ConvertTo-Json $j\r\n    $output =  run-native aws dynamodb get-item `\r\n        --table-name \"codebuild-nodejs-slot_table\" --region us-west-2 `\r\n        --key $keyjson `\r\n        --projection-expression \"SlotFamily, cv\" --profile khatibinil\r\n    \r\n    if( -not $output) \r\n    {      \r\n        #use powershell to build JSON\r\n        $j = @{\r\n            ComponentName = @{\r\n                S=\"$slot\"\r\n            }\r\n            SlotFamily = @{\r\n            S=\"codebuild-nodejs-slot\"\r\n            }\r\n            cv = @{\r\n                N=\"0\"\r\n            }\r\n        }\r\n        $itemjson = ConvertTo-Json $j\r\n\r\n        run-native aws dynamodb put-item `\r\n        --table-name \"codebuild-nodejs-slot_table\"  --region us-west-2 `\r\n        --item $itemjson `\r\n        --return-values ALL_OLD `\r\n        --profile khatibinil\r\n    }\r\n\r\n}",
                            "filename": "C:\\VSTS\\SCM\\slotted-codebuilds.terraform\\.terraform\\modules\\5fb01fedb410e4cdd3aea9acc14bba55/init-slots-build-codebuild-nodejs.ps1",
                            "id": "1c7c51efef2f25762c3c13089bc1627e29321706"
                        },
                        "meta": {},
                        "tainted": false
                    },
                    "deposed": [],
                    "provider": "provider.local"
                },
                "null_resource.init_slots": {
                    "type": "null_resource",
                    "depends_on": [
                        "data.template_file.init_slots_powershell"
                    ],
                    "primary": {
                        "id": "3659337715700358366",
                        "attributes": {
                            "id": "3659337715700358366",
                            "triggers.%": "1",
                            "triggers.test": "function run-native($command) { \u0026 $command ($args -replace'(\\\\*)\"','$1$1\\\"') }\r\n#$region =\"us-west-2\"\r\n$count=4\r\n$slots=@()\r\nwhile ($count -gt 0){\r\n    $slots+=\"codebuild-nodejs-slot-{0}\" -f $count\r\n    $count--\r\n}\r\n\r\nforeach ($slot in $slots) \r\n{\r\n    $j = @{\r\n        ComponentName = @{\r\n            S=\"$slot\"\r\n            }\r\n        }\r\n    $keyjson = ConvertTo-Json $j\r\n    $output =  run-native aws dynamodb get-item `\r\n        --table-name \"codebuild-nodejs-slot_table\" --region us-west-2 `\r\n        --key $keyjson `\r\n        --projection-expression \"SlotFamily, cv\" --profile khatibinil\r\n    \r\n    if( -not $output) \r\n    {      \r\n        #use powershell to build JSON\r\n        $j = @{\r\n            ComponentName = @{\r\n                S=\"$slot\"\r\n            }\r\n            SlotFamily = @{\r\n            S=\"codebuild-nodejs-slot\"\r\n            }\r\n            cv = @{\r\n                N=\"0\"\r\n            }\r\n        }\r\n        $itemjson = ConvertTo-Json $j\r\n\r\n        run-native aws dynamodb put-item `\r\n        --table-name \"codebuild-nodejs-slot_table\"  --region us-west-2 `\r\n        --item $itemjson `\r\n        --return-values ALL_OLD `\r\n        --profile khatibinil\r\n    }\r\n\r\n}"
                        },
                        "meta": {},
                        "tainted": false
                    },
                    "deposed": [],
                    "provider": "provider.null"
                }
            },
            "depends_on": []
        },
        {
            "path": [
                "root",
                "packer_slotted_codebuild"
            ],
            "outputs": {
                "code_build_slots": {
                    "sensitive": false,
                    "type": "list",
                    "value": [
                        "codebuild-packer-slot-0",
                        "codebuild-packer-slot-1",
                        "codebuild-packer-slot-2",
                        "codebuild-packer-slot-3"
                    ]
                },
                "dynamodb_table_arn": {
                    "sensitive": false,
                    "type": "string",
                    "value": "arn:aws:dynamodb:us-west-2:846542577485:table/codebuild-packer-slot_table"
                }
            },
            "resources": {
                "aws_codebuild_project.codebuild_project.0": {
                    "type": "aws_codebuild_project",
                    "depends_on": [
                        "aws_iam_role.codebuild_role"
                    ],
                    "primary": {
                        "id": "arn:aws:codebuild:us-west-2:846542577485:project/codebuild-packer-slot-0",
                        "attributes": {
                            "arn": "arn:aws:codebuild:us-west-2:846542577485:project/codebuild-packer-slot-0",
                            "artifacts.#": "1",
                            "artifacts.1178773975.encryption_disabled": "false",
                            "artifacts.1178773975.location": "",
                            "artifacts.1178773975.name": "",
                            "artifacts.1178773975.namespace_type": "",
                            "artifacts.1178773975.packaging": "",
                            "artifacts.1178773975.path": "",
                            "artifacts.1178773975.type": "NO_ARTIFACTS",
                            "badge_enabled": "false",
                            "badge_url": "",
                            "build_timeout": "120",
                            "cache.#": "1",
                            "cache.0.location": "",
                            "cache.0.type": "NO_CACHE",
                            "description": "code build project for codebuild-packer-0",
                            "encryption_key": "arn:aws:kms:us-west-2:846542577485:alias/aws/s3",
                            "environment.#": "1",
                            "environment.573213581.certificate": "",
                            "environment.573213581.compute_type": "BUILD_GENERAL1_SMALL",
                            "environment.573213581.environment_variable.#": "0",
                            "environment.573213581.image": "aws/codebuild/standard:2.0",
                            "environment.573213581.privileged_mode": "true",
                            "environment.573213581.type": "LINUX_CONTAINER",
                            "id": "arn:aws:codebuild:us-west-2:846542577485:project/codebuild-packer-slot-0",
                            "name": "codebuild-packer-slot-0",
                            "secondary_artifacts.#": "0",
                            "secondary_sources.#": "0",
                            "service_role": "arn:aws:iam::846542577485:role/codebuild-packer-role",
                            "source.#": "1",
                            "source.337500915.auth.#": "0",
                            "source.337500915.buildspec": "",
                            "source.337500915.git_clone_depth": "0",
                            "source.337500915.insecure_ssl": "false",
                            "source.337500915.location": "arn:aws:s3:::deployment-packages-w2/codebuild/source/codebuild-packer-slot-0.zip",
                            "source.337500915.report_build_status": "false",
                            "source.337500915.type": "S3",
                            "tags.%": "4",
                            "tags.Application": "ALL",
                            "tags.Environment": "prod",
                            "tags.Terraform": "scm",
                            "tags.Zone": "packer_slotted_codebuild",
                            "vpc_config.#": "0"
                        },
                        "meta": {},
                        "tainted": false
                    },
                    "deposed": [],
                    "provider": "provider.aws"
                },
                "aws_codebuild_project.codebuild_project.1": {
                    "type": "aws_codebuild_project",
                    "depends_on": [
                        "aws_iam_role.codebuild_role"
                    ],
                    "primary": {
                        "id": "arn:aws:codebuild:us-west-2:846542577485:project/codebuild-packer-slot-1",
                        "attributes": {
                            "arn": "arn:aws:codebuild:us-west-2:846542577485:project/codebuild-packer-slot-1",
                            "artifacts.#": "1",
                            "artifacts.1178773975.encryption_disabled": "false",
                            "artifacts.1178773975.location": "",
                            "artifacts.1178773975.name": "",
                            "artifacts.1178773975.namespace_type": "",
                            "artifacts.1178773975.packaging": "",
                            "artifacts.1178773975.path": "",
                            "artifacts.1178773975.type": "NO_ARTIFACTS",
                            "badge_enabled": "false",
                            "badge_url": "",
                            "build_timeout": "120",
                            "cache.#": "1",
                            "cache.0.location": "",
                            "cache.0.type": "NO_CACHE",
                            "description": "code build project for codebuild-packer-1",
                            "encryption_key": "arn:aws:kms:us-west-2:846542577485:alias/aws/s3",
                            "environment.#": "1",
                            "environment.573213581.certificate": "",
                            "environment.573213581.compute_type": "BUILD_GENERAL1_SMALL",
                            "environment.573213581.environment_variable.#": "0",
                            "environment.573213581.image": "aws/codebuild/standard:2.0",
                            "environment.573213581.privileged_mode": "true",
                            "environment.573213581.type": "LINUX_CONTAINER",
                            "id": "arn:aws:codebuild:us-west-2:846542577485:project/codebuild-packer-slot-1",
                            "name": "codebuild-packer-slot-1",
                            "secondary_artifacts.#": "0",
                            "secondary_sources.#": "0",
                            "service_role": "arn:aws:iam::846542577485:role/codebuild-packer-role",
                            "source.#": "1",
                            "source.1903878581.auth.#": "0",
                            "source.1903878581.buildspec": "",
                            "source.1903878581.git_clone_depth": "0",
                            "source.1903878581.insecure_ssl": "false",
                            "source.1903878581.location": "arn:aws:s3:::deployment-packages-w2/codebuild/source/codebuild-packer-slot-1.zip",
                            "source.1903878581.report_build_status": "false",
                            "source.1903878581.type": "S3",
                            "tags.%": "4",
                            "tags.Application": "ALL",
                            "tags.Environment": "prod",
                            "tags.Terraform": "scm",
                            "tags.Zone": "packer_slotted_codebuild",
                            "vpc_config.#": "0"
                        },
                        "meta": {},
                        "tainted": false
                    },
                    "deposed": [],
                    "provider": "provider.aws"
                },
                "aws_codebuild_project.codebuild_project.2": {
                    "type": "aws_codebuild_project",
                    "depends_on": [
                        "aws_iam_role.codebuild_role"
                    ],
                    "primary": {
                        "id": "arn:aws:codebuild:us-west-2:846542577485:project/codebuild-packer-slot-2",
                        "attributes": {
                            "arn": "arn:aws:codebuild:us-west-2:846542577485:project/codebuild-packer-slot-2",
                            "artifacts.#": "1",
                            "artifacts.1178773975.encryption_disabled": "false",
                            "artifacts.1178773975.location": "",
                            "artifacts.1178773975.name": "",
                            "artifacts.1178773975.namespace_type": "",
                            "artifacts.1178773975.packaging": "",
                            "artifacts.1178773975.path": "",
                            "artifacts.1178773975.type": "NO_ARTIFACTS",
                            "badge_enabled": "false",
                            "badge_url": "",
                            "build_timeout": "120",
                            "cache.#": "1",
                            "cache.0.location": "",
                            "cache.0.type": "NO_CACHE",
                            "description": "code build project for codebuild-packer-2",
                            "encryption_key": "arn:aws:kms:us-west-2:846542577485:alias/aws/s3",
                            "environment.#": "1",
                            "environment.573213581.certificate": "",
                            "environment.573213581.compute_type": "BUILD_GENERAL1_SMALL",
                            "environment.573213581.environment_variable.#": "0",
                            "environment.573213581.image": "aws/codebuild/standard:2.0",
                            "environment.573213581.privileged_mode": "true",
                            "environment.573213581.type": "LINUX_CONTAINER",
                            "id": "arn:aws:codebuild:us-west-2:846542577485:project/codebuild-packer-slot-2",
                            "name": "codebuild-packer-slot-2",
                            "secondary_artifacts.#": "0",
                            "secondary_sources.#": "0",
                            "service_role": "arn:aws:iam::846542577485:role/codebuild-packer-role",
                            "source.#": "1",
                            "source.3738414207.auth.#": "0",
                            "source.3738414207.buildspec": "",
                            "source.3738414207.git_clone_depth": "0",
                            "source.3738414207.insecure_ssl": "false",
                            "source.3738414207.location": "arn:aws:s3:::deployment-packages-w2/codebuild/source/codebuild-packer-slot-2.zip",
                            "source.3738414207.report_build_status": "false",
                            "source.3738414207.type": "S3",
                            "tags.%": "4",
                            "tags.Application": "ALL",
                            "tags.Environment": "prod",
                            "tags.Terraform": "scm",
                            "tags.Zone": "packer_slotted_codebuild",
                            "vpc_config.#": "0"
                        },
                        "meta": {},
                        "tainted": false
                    },
                    "deposed": [],
                    "provider": "provider.aws"
                },
                "aws_codebuild_project.codebuild_project.3": {
                    "type": "aws_codebuild_project",
                    "depends_on": [
                        "aws_iam_role.codebuild_role"
                    ],
                    "primary": {
                        "id": "arn:aws:codebuild:us-west-2:846542577485:project/codebuild-packer-slot-3",
                        "attributes": {
                            "arn": "arn:aws:codebuild:us-west-2:846542577485:project/codebuild-packer-slot-3",
                            "artifacts.#": "1",
                            "artifacts.1178773975.encryption_disabled": "false",
                            "artifacts.1178773975.location": "",
                            "artifacts.1178773975.name": "",
                            "artifacts.1178773975.namespace_type": "",
                            "artifacts.1178773975.packaging": "",
                            "artifacts.1178773975.path": "",
                            "artifacts.1178773975.type": "NO_ARTIFACTS",
                            "badge_enabled": "false",
                            "badge_url": "",
                            "build_timeout": "120",
                            "cache.#": "1",
                            "cache.0.location": "",
                            "cache.0.type": "NO_CACHE",
                            "description": "code build project for codebuild-packer-3",
                            "encryption_key": "arn:aws:kms:us-west-2:846542577485:alias/aws/s3",
                            "environment.#": "1",
                            "environment.573213581.certificate": "",
                            "environment.573213581.compute_type": "BUILD_GENERAL1_SMALL",
                            "environment.573213581.environment_variable.#": "0",
                            "environment.573213581.image": "aws/codebuild/standard:2.0",
                            "environment.573213581.privileged_mode": "true",
                            "environment.573213581.type": "LINUX_CONTAINER",
                            "id": "arn:aws:codebuild:us-west-2:846542577485:project/codebuild-packer-slot-3",
                            "name": "codebuild-packer-slot-3",
                            "secondary_artifacts.#": "0",
                            "secondary_sources.#": "0",
                            "service_role": "arn:aws:iam::846542577485:role/codebuild-packer-role",
                            "source.#": "1",
                            "source.3149174585.auth.#": "0",
                            "source.3149174585.buildspec": "",
                            "source.3149174585.git_clone_depth": "0",
                            "source.3149174585.insecure_ssl": "false",
                            "source.3149174585.location": "arn:aws:s3:::deployment-packages-w2/codebuild/source/codebuild-packer-slot-3.zip",
                            "source.3149174585.report_build_status": "false",
                            "source.3149174585.type": "S3",
                            "tags.%": "4",
                            "tags.Application": "ALL",
                            "tags.Environment": "prod",
                            "tags.Terraform": "scm",
                            "tags.Zone": "packer_slotted_codebuild",
                            "vpc_config.#": "0"
                        },
                        "meta": {},
                        "tainted": false
                    },
                    "deposed": [],
                    "provider": "provider.aws"
                },
                "aws_dynamodb_table.slot_table": {
                    "type": "aws_dynamodb_table",
                    "depends_on": [],
                    "primary": {
                        "id": "codebuild-packer-slot_table",
                        "attributes": {
                            "arn": "arn:aws:dynamodb:us-west-2:846542577485:table/codebuild-packer-slot_table",
                            "attribute.#": "1",
                            "attribute.2470487362.name": "ComponentName",
                            "attribute.2470487362.type": "S",
                            "billing_mode": "PROVISIONED",
                            "global_secondary_index.#": "0",
                            "hash_key": "ComponentName",
                            "id": "codebuild-packer-slot_table",
                            "local_secondary_index.#": "0",
                            "name": "codebuild-packer-slot_table",
                            "point_in_time_recovery.#": "1",
                            "point_in_time_recovery.0.enabled": "false",
                            "read_capacity": "5",
                            "server_side_encryption.#": "0",
                            "stream_arn": "",
                            "stream_enabled": "false",
                            "stream_label": "",
                            "stream_view_type": "",
                            "tags.%": "4",
                            "tags.Application": "ALL",
                            "tags.Environment": "prod",
                            "tags.Terraform": "scm",
                            "tags.Zone": "packer_slotted_codebuild",
                            "ttl.#": "0",
                            "write_capacity": "5"
                        },
                        "meta": {
                            "e2bfb730-ecaa-11e6-8f88-34363bc7c4c0": {
                                "create": 600000000000,
                                "delete": 600000000000,
                                "update": 3600000000000
                            },
                            "schema_version": "1"
                        },
                        "tainted": false
                    },
                    "deposed": [],
                    "provider": "provider.aws"
                },
                "aws_iam_policy.codebuild_policy": {
                    "type": "aws_iam_policy",
                    "depends_on": [
                        "data.aws_caller_identity.current"
                    ],
                    "primary": {
                        "id": "arn:aws:iam::846542577485:policy/service-role/codebuild-packer-policy",
                        "attributes": {
                            "arn": "arn:aws:iam::846542577485:policy/service-role/codebuild-packer-policy",
                            "description": "Policy used in trust relationship with CodeBuild",
                            "id": "arn:aws:iam::846542577485:policy/service-role/codebuild-packer-policy",
                            "name": "codebuild-packer-policy",
                            "path": "/service-role/",
                            "policy": "{\n    \"Version\": \"2012-10-17\",\n    \"Statement\": [\n       {\n            \"Sid\": \"VisualEditor0\",\n            \"Effect\": \"Allow\",\n            \"Action\": [\n                \"s3:GetObject\",\n                \"s3:PutObject\",\n                \"s3:ListBucket\",\n\t\t\t\t        \"s3:GetObjectVersion\"\n            ],\n            \"Resource\": [\n              \"arn:aws:s3:::deployment-packages-w2\",\n              \"arn:aws:s3:::deployment-packages-w2/*\"\n            ]\n        },\n        {\n\n            \"Effect\": \"Allow\",\n            \"Action\": [\n                \"kms:ListAliases\",\n                \"kms:ListKeys\",\n                \"kms:Encrypt\",\n                \"kms:Decrypt\",\n                \"kms:ReEncrypt*\",\n                \"kms:GenerateDataKey*\",\n                \"kms:DescribeKey\"\n            ],\n            \"Resource\": [\n              \"arn:aws:kms:us-west-2:846542577485:key/b3a7437b-eb75-4570-ba0c-9cfafaca7815\"\n            ]\n        },\n        {\n            \"Sid\": \"VisualEditor4\",\n            \"Effect\": \"Allow\",\n            \"Action\": [\n                \"logs:CreateLogGroup\",\n                \"logs:CreateLogStream\",\n                \"logs:PutLogEvents\",\n                \"logs:DescribeLogStreams\"\n            ],\n            \"Resource\": [\n                \"*\"\n            ]\n        },\n        {\n            \"Sid\": \"VisualEditor6\",\n            \"Effect\": \"Allow\",\n            \"Action\": [\n                \"ecr:CreateRepository\",\n                \"ecr:GetAuthorizationToken\",\n                \"ecr:InitiateLayerUpload\",\n                \"ecr:UploadLayerPart\",\n                \"ecr:CompleteLayerUpload\",\n                \"ecr:BatchCheckLayerAvailability\",\n                \"ecr:PutImage\",\n                \"ecr:GetDownloadUrlForLayer\",\n                \"ecr:BatchGetImage\",\n                \"ecr:SetRepositoryPolicy\"\n            ],\n            \"Resource\": \"*\"\n        },\n        {\n            \"Sid\": \"VisualEditor7\",\n            \"Effect\": \"Allow\",\n            \"Action\": \"ssm:GetParameter\",\n            \"Resource\": [\n              \"arn:aws:ssm:us-west-2:846542577485:parameter/scm/*\",\n              \"arn:aws:ssm:us-east-1:846542577485:parameter/scm/*\",\n              \"arn:aws:ssm:us-west-2:846542577485:parameter/scm_packages/*\",\n              \"arn:aws:ssm:us-east-1:846542577485:parameter/scm_packages/*\"\n            ]\n        },\n        {\n            \"Effect\": \"Allow\",\n            \"Action\": \"ssm:GetParameters\",\n            \"Resource\": [\n              \"arn:aws:ssm:us-west-2:846542577485:parameter/aws/service/*\",\n              \"arn:aws:ssm:us-east-1:846542577485:parameter/aws/service/*\",\n              \"arn:aws:ssm:us-west-2::parameter/aws/service/*\",\n              \"arn:aws:ssm:us-east-1::parameter/aws/service/*\"\n            ]\n        },\n        {\n            \"Effect\": \"Allow\",\n            \"Action\" : [\n                \"ec2:AttachVolume\",\n                \"ec2:AuthorizeSecurityGroupIngress\",\n                \"ec2:CopyImage\",\n                \"ec2:CreateImage\",\n                \"ec2:CreateKeypair\",\n                \"ec2:CreateSecurityGroup\",\n                \"ec2:CreateSnapshot\",\n                \"ec2:CreateTags\",\n                \"ec2:CreateVolume\",\n                \"ec2:DeleteKeypair\",\n                \"ec2:DeleteSecurityGroup\",\n                \"ec2:DeleteSnapshot\",\n                \"ec2:DeleteVolume\",\n                \"ec2:DeregisterImage\",\n                \"ec2:DescribeImageAttribute\",\n                \"ec2:DescribeImages\",\n                \"ec2:DescribeInstances\",\n                \"ec2:DescribeInstanceStatus\",\n                \"ec2:DescribeRegions\",\n                \"ec2:DescribeSecurityGroups\",\n                \"ec2:DescribeSnapshots\",\n                \"ec2:DescribeSubnets\",\n                \"ec2:DescribeTags\",\n                \"ec2:DescribeVolumes\",\n                \"ec2:DetachVolume\",\n                \"ec2:GetPasswordData\",\n                \"ec2:ModifyImageAttribute\",\n                \"ec2:ModifyInstanceAttribute\",\n                \"ec2:ModifySnapshotAttribute\",\n                \"ec2:RegisterImage\",\n                \"ec2:RunInstances\",\n                \"ec2:StopInstances\",\n                \"ec2:TerminateInstances\"\n              ],\n            \"Resource\": \"*\"\n        }\n  ]\n}\n"
                        },
                        "meta": {},
                        "tainted": false
                    },
                    "deposed": [],
                    "provider": "provider.aws"
                },
                "aws_iam_policy_attachment.codebuild_policy_attachment": {
                    "type": "aws_iam_policy_attachment",
                    "depends_on": [
                        "aws_iam_policy.codebuild_policy",
                        "aws_iam_role.codebuild_role"
                    ],
                    "primary": {
                        "id": "codebuild-packer-policy-attachment",
                        "attributes": {
                            "groups.#": "0",
                            "id": "codebuild-packer-policy-attachment",
                            "name": "codebuild-packer-policy-attachment",
                            "policy_arn": "arn:aws:iam::846542577485:policy/service-role/codebuild-packer-policy",
                            "roles.#": "1",
                            "roles.2874889214": "codebuild-packer-role",
                            "users.#": "0"
                        },
                        "meta": {},
                        "tainted": false
                    },
                    "deposed": [],
                    "provider": "provider.aws"
                },
                "aws_iam_role.codebuild_role": {
                    "type": "aws_iam_role",
                    "depends_on": [],
                    "primary": {
                        "id": "codebuild-packer-role",
                        "attributes": {
                            "arn": "arn:aws:iam::846542577485:role/codebuild-packer-role",
                            "assume_role_policy": "{\"Version\":\"2012-10-17\",\"Statement\":[{\"Effect\":\"Allow\",\"Principal\":{\"Service\":\"codebuild.amazonaws.com\"},\"Action\":\"sts:AssumeRole\"}]}",
                            "create_date": "2019-07-17T19:11:46Z",
                            "description": "",
                            "force_detach_policies": "false",
                            "id": "codebuild-packer-role",
                            "max_session_duration": "3600",
                            "name": "codebuild-packer-role",
                            "path": "/",
                            "tags.%": "0",
                            "unique_id": "AROA4KGO6T5GXAQZK3T6N"
                        },
                        "meta": {},
                        "tainted": false
                    },
                    "deposed": [],
                    "provider": "provider.aws"
                },
                "data.aws_caller_identity.current": {
                    "type": "aws_caller_identity",
                    "depends_on": [],
                    "primary": {
                        "id": "2019-07-17 19:11:22.6815587 +0000 UTC",
                        "attributes": {
                            "account_id": "846542577485",
                            "arn": "arn:aws:iam::846542577485:user/khatibinil",
                            "id": "2019-07-17 19:11:22.6815587 +0000 UTC",
                            "user_id": "AIDAJRWUITJLOOC2D7VA6"
                        },
                        "meta": {},
                        "tainted": false
                    },
                    "deposed": [],
                    "provider": "provider.aws"
                },
                "data.template_file.init_slots_powershell": {
                    "type": "template_file",
                    "depends_on": [
                        "aws_codebuild_project.codebuild_project"
                    ],
                    "primary": {
                        "id": "5c5d11dfb2b1ee7a25ceb50d0f4d6932b14437098146db8ef5fe1dc674ab188c",
                        "attributes": {
                            "id": "5c5d11dfb2b1ee7a25ceb50d0f4d6932b14437098146db8ef5fe1dc674ab188c",
                            "rendered": "function run-native($command) { \u0026 $command ($args -replace'(\\\\*)\"','$1$1\\\"') }\r\n#$region =\"us-west-2\"\r\n$count=4\r\n$slots=@()\r\nwhile ($count -gt 0){\r\n    $slots+=\"codebuild-packer-slot-{0}\" -f $count\r\n    $count--\r\n}\r\n\r\nforeach ($slot in $slots) \r\n{\r\n    $j = @{\r\n        ComponentName = @{\r\n            S=\"$slot\"\r\n            }\r\n        }\r\n    $keyjson = ConvertTo-Json $j\r\n    $output =  run-native aws dynamodb get-item `\r\n        --table-name \"codebuild-packer-slot_table\" --region us-west-2 `\r\n        --key $keyjson `\r\n        --projection-expression \"SlotFamily, cv\" --profile khatibinil\r\n    \r\n    if( -not $output) \r\n    {      \r\n        #use powershell to build JSON\r\n        $j = @{\r\n            ComponentName = @{\r\n                S=\"$slot\"\r\n            }\r\n            SlotFamily = @{\r\n            S=\"codebuild-packer-slot\"\r\n            }\r\n            cv = @{\r\n                N=\"0\"\r\n            }\r\n        }\r\n        $itemjson = ConvertTo-Json $j\r\n\r\n        run-native aws dynamodb put-item `\r\n        --table-name \"codebuild-packer-slot_table\"  --region us-west-2 `\r\n        --item $itemjson `\r\n        --return-values ALL_OLD `\r\n        --profile khatibinil\r\n    }\r\n\r\n}",
                            "template": "function run-native($command) { \u0026 $command ($args -replace'(\\\\*)\"','$1$1\\\"') }\r\n#$region =\"us-west-2\"\r\n$count=${count}\r\n$slots=@()\r\nwhile ($count -gt 0){\r\n    $slots+=\"${slot_family}-slot-{0}\" -f $count\r\n    $count--\r\n}\r\n\r\nforeach ($slot in $slots) \r\n{\r\n    $j = @{\r\n        ComponentName = @{\r\n            S=\"$slot\"\r\n            }\r\n        }\r\n    $keyjson = ConvertTo-Json $j\r\n    $output =  run-native aws dynamodb get-item `\r\n        --table-name \"${slot_family}-slot_table\" --region ${aws_region} `\r\n        --key $keyjson `\r\n        --projection-expression \"SlotFamily, cv\" --profile ${aws_profile}\r\n    \r\n    if( -not $output) \r\n    {      \r\n        #use powershell to build JSON\r\n        $j = @{\r\n            ComponentName = @{\r\n                S=\"$slot\"\r\n            }\r\n            SlotFamily = @{\r\n            S=\"${slot_family}-slot\"\r\n            }\r\n            cv = @{\r\n                N=\"0\"\r\n            }\r\n        }\r\n        $itemjson = ConvertTo-Json $j\r\n\r\n        run-native aws dynamodb put-item `\r\n        --table-name \"${slot_family}-slot_table\"  --region ${aws_region} `\r\n        --item $itemjson `\r\n        --return-values ALL_OLD `\r\n        --profile ${aws_profile}\r\n    }\r\n\r\n}",
                            "vars.%": "4",
                            "vars.aws_profile": "khatibinil",
                            "vars.aws_region": "us-west-2",
                            "vars.count": "4",
                            "vars.slot_family": "codebuild-packer"
                        },
                        "meta": {},
                        "tainted": false
                    },
                    "deposed": [],
                    "provider": "provider.template"
                },
                "local_file.init_slots_powershell": {
                    "type": "local_file",
                    "depends_on": [
                        "data.template_file.init_slots_powershell"
                    ],
                    "primary": {
                        "id": "a98a5cb5e17d7edfa6f63d7e62805f84f25e4e93",
                        "attributes": {
                            "content": "function run-native($command) { \u0026 $command ($args -replace'(\\\\*)\"','$1$1\\\"') }\r\n#$region =\"us-west-2\"\r\n$count=4\r\n$slots=@()\r\nwhile ($count -gt 0){\r\n    $slots+=\"codebuild-packer-slot-{0}\" -f $count\r\n    $count--\r\n}\r\n\r\nforeach ($slot in $slots) \r\n{\r\n    $j = @{\r\n        ComponentName = @{\r\n            S=\"$slot\"\r\n            }\r\n        }\r\n    $keyjson = ConvertTo-Json $j\r\n    $output =  run-native aws dynamodb get-item `\r\n        --table-name \"codebuild-packer-slot_table\" --region us-west-2 `\r\n        --key $keyjson `\r\n        --projection-expression \"SlotFamily, cv\" --profile khatibinil\r\n    \r\n    if( -not $output) \r\n    {      \r\n        #use powershell to build JSON\r\n        $j = @{\r\n            ComponentName = @{\r\n                S=\"$slot\"\r\n            }\r\n            SlotFamily = @{\r\n            S=\"codebuild-packer-slot\"\r\n            }\r\n            cv = @{\r\n                N=\"0\"\r\n            }\r\n        }\r\n        $itemjson = ConvertTo-Json $j\r\n\r\n        run-native aws dynamodb put-item `\r\n        --table-name \"codebuild-packer-slot_table\"  --region us-west-2 `\r\n        --item $itemjson `\r\n        --return-values ALL_OLD `\r\n        --profile khatibinil\r\n    }\r\n\r\n}",
                            "filename": "C:\\VSTS\\SCM\\slotted-codebuilds.terraform\\.terraform\\modules\\69da5fe0976697e0c367637d5e1d0259/init-slots-build-codebuild-packer.ps1",
                            "id": "a98a5cb5e17d7edfa6f63d7e62805f84f25e4e93"
                        },
                        "meta": {},
                        "tainted": false
                    },
                    "deposed": [],
                    "provider": "provider.local"
                },
                "null_resource.init_slots": {
                    "type": "null_resource",
                    "depends_on": [
                        "data.template_file.init_slots_powershell"
                    ],
                    "primary": {
                        "id": "5929832005066612223",
                        "attributes": {
                            "id": "5929832005066612223",
                            "triggers.%": "1",
                            "triggers.test": "function run-native($command) { \u0026 $command ($args -replace'(\\\\*)\"','$1$1\\\"') }\r\n#$region =\"us-west-2\"\r\n$count=4\r\n$slots=@()\r\nwhile ($count -gt 0){\r\n    $slots+=\"codebuild-packer-slot-{0}\" -f $count\r\n    $count--\r\n}\r\n\r\nforeach ($slot in $slots) \r\n{\r\n    $j = @{\r\n        ComponentName = @{\r\n            S=\"$slot\"\r\n            }\r\n        }\r\n    $keyjson = ConvertTo-Json $j\r\n    $output =  run-native aws dynamodb get-item `\r\n        --table-name \"codebuild-packer-slot_table\" --region us-west-2 `\r\n        --key $keyjson `\r\n        --projection-expression \"SlotFamily, cv\" --profile khatibinil\r\n    \r\n    if( -not $output) \r\n    {      \r\n        #use powershell to build JSON\r\n        $j = @{\r\n            ComponentName = @{\r\n                S=\"$slot\"\r\n            }\r\n            SlotFamily = @{\r\n            S=\"codebuild-packer-slot\"\r\n            }\r\n            cv = @{\r\n                N=\"0\"\r\n            }\r\n        }\r\n        $itemjson = ConvertTo-Json $j\r\n\r\n        run-native aws dynamodb put-item `\r\n        --table-name \"codebuild-packer-slot_table\"  --region us-west-2 `\r\n        --item $itemjson `\r\n        --return-values ALL_OLD `\r\n        --profile khatibinil\r\n    }\r\n\r\n}"
                        },
                        "meta": {},
                        "tainted": false
                    },
                    "deposed": [],
                    "provider": "provider.null"
                }
            },
            "depends_on": []
        },
        {
            "path": [
                "root",
                "replicated_buckets"
            ],
            "outputs": {
                "primary_bucket_arns": {
                    "sensitive": false,
                    "type": "list",
                    "value": [
                        "arn:aws:s3:::deployment-packages-w2"
                    ]
                },
                "primary_bucket_name": {
                    "sensitive": false,
                    "type": "list",
                    "value": [
                        "deployment-packages-w2"
                    ]
                },
                "primary_bucket_region": {
                    "sensitive": false,
                    "type": "string",
                    "value": "us-west-2"
                },
                "primary_cli_commands": {
                    "sensitive": false,
                    "type": "list",
                    "value": [
                        "aws s3private put-bucket-replication --bucket deployment-packages-w2 --replication-configuration file://crr-kms-setup/deployment-packages-w2.json --region us-west-2 --profile SOURCE_ACCOUNT_PROFILE"
                    ]
                },
                "primary_kms_aliases": {
                    "sensitive": false,
                    "type": "list",
                    "value": [
                        "arn:aws:kms:us-west-2:846542577485:alias/deployment-packages-w2"
                    ]
                },
                "primary_kms_key_arns": {
                    "sensitive": false,
                    "type": "list",
                    "value": [
                        "arn:aws:kms:us-west-2:846542577485:key/b3a7437b-eb75-4570-ba0c-9cfafaca7815"
                    ]
                },
                "primary_kms_keys": {
                    "sensitive": false,
                    "type": "list",
                    "value": [
                        "b3a7437b-eb75-4570-ba0c-9cfafaca7815"
                    ]
                },
                "secondary_bucket_arns": {
                    "sensitive": false,
                    "type": "list",
                    "value": [
                        "arn:aws:s3:::deployment-packages-e1"
                    ]
                },
                "secondary_bucket_name": {
                    "sensitive": false,
                    "type": "list",
                    "value": [
                        "deployment-packages-e1"
                    ]
                },
                "secondary_bucket_region": {
                    "sensitive": false,
                    "type": "string",
                    "value": "us-east-1"
                },
                "secondary_cli_commands": {
                    "sensitive": false,
                    "type": "list",
                    "value": [
                        "aws s3private put-bucket-replication --bucket deployment-packages-e1 --replication-configuration file://crr-kms-setup/deployment-packages-e1.json --region us-east-1 --profile SOURCE_ACCOUNT_PROFILE"
                    ]
                },
                "secondary_kms_aliases": {
                    "sensitive": false,
                    "type": "list",
                    "value": [
                        "arn:aws:kms:us-east-1:846542577485:alias/deployment-packages-e1"
                    ]
                },
                "secondary_kms_key_arns": {
                    "sensitive": false,
                    "type": "list",
                    "value": [
                        "arn:aws:kms:us-east-1:846542577485:key/bc12fe13-b930-440e-ad06-761f9a0678ee"
                    ]
                },
                "secondary_kms_keys": {
                    "sensitive": false,
                    "type": "list",
                    "value": [
                        "bc12fe13-b930-440e-ad06-761f9a0678ee"
                    ]
                }
            },
            "resources": {
                "aws_iam_policy.replicate_policy": {
                    "type": "aws_iam_policy",
                    "depends_on": [
                        "data.aws_iam_policy_document.replicate_policy"
                    ],
                    "primary": {
                        "id": "arn:aws:iam::846542577485:policy/scm-replicate-policy",
                        "attributes": {
                            "arn": "arn:aws:iam::846542577485:policy/scm-replicate-policy",
                            "description": "",
                            "id": "arn:aws:iam::846542577485:policy/scm-replicate-policy",
                            "name": "scm-replicate-policy",
                            "path": "/",
                            "policy": "{\n  \"Version\": \"2012-10-17\",\n  \"Statement\": [\n    {\n      \"Sid\": \"1\",\n      \"Effect\": \"Allow\",\n      \"Action\": [\n        \"s3:ListBucket\",\n        \"s3:GetReplicationConfiguration\"\n      ],\n      \"Resource\": [\n        \"arn:aws:s3:::deployment-packages-w2\",\n        \"arn:aws:s3:::deployment-packages-e1\"\n      ]\n    },\n    {\n      \"Sid\": \"\",\n      \"Effect\": \"Allow\",\n      \"Action\": [\n        \"s3:GetObjectVersionForReplication\",\n        \"s3:GetObjectVersionAcl\"\n      ],\n      \"Resource\": [\n        \"arn:aws:s3:::deployment-packages-w2/*\",\n        \"arn:aws:s3:::deployment-packages-e1/*\"\n      ]\n    },\n    {\n      \"Sid\": \"\",\n      \"Effect\": \"Allow\",\n      \"Action\": [\n        \"s3:ReplicateObject\",\n        \"s3:ReplicateDelete\"\n      ],\n      \"Resource\": [\n        \"arn:aws:s3:::deployment-packages-w2/*\",\n        \"arn:aws:s3:::deployment-packages-e1/*\"\n      ]\n    },\n    {\n      \"Sid\": \"\",\n      \"Effect\": \"Allow\",\n      \"Action\": \"kms:Decrypt\",\n      \"Resource\": [\n        \"arn:aws:kms:us-west-2:846542577485:key/b3a7437b-eb75-4570-ba0c-9cfafaca7815\",\n        \"arn:aws:kms:us-east-1:846542577485:key/bc12fe13-b930-440e-ad06-761f9a0678ee\"\n      ],\n      \"Condition\": {\n        \"StringLike\": {\n          \"kms:EncryptionContext:aws:s3:arn\": [\n            \"arn:aws:s3:::deployment-packages-w2/*\",\n            \"arn:aws:s3:::deployment-packages-e1/*\"\n          ],\n          \"kms:ViaService\": [\n            \"s3.us-west-2.amazonaws.com\",\n            \"s3.us-east-1.amazonaws.com\"\n          ]\n        }\n      }\n    },\n    {\n      \"Sid\": \"\",\n      \"Effect\": \"Allow\",\n      \"Action\": \"kms:Encrypt\",\n      \"Resource\": [\n        \"arn:aws:kms:us-west-2:846542577485:key/b3a7437b-eb75-4570-ba0c-9cfafaca7815\",\n        \"arn:aws:kms:us-east-1:846542577485:key/bc12fe13-b930-440e-ad06-761f9a0678ee\"\n      ],\n      \"Condition\": {\n        \"StringLike\": {\n          \"kms:EncryptionContext:aws:s3:arn\": [\n            \"arn:aws:s3:::deployment-packages-w2/*\",\n            \"arn:aws:s3:::deployment-packages-e1/*\"\n          ],\n          \"kms:ViaService\": [\n            \"s3.us-west-2.amazonaws.com\",\n            \"s3.us-east-1.amazonaws.com\"\n          ]\n        }\n      }\n    }\n  ]\n}"
                        },
                        "meta": {},
                        "tainted": false
                    },
                    "deposed": [],
                    "provider": "provider.aws"
                },
                "aws_iam_role.s3_replicate_role": {
                    "type": "aws_iam_role",
                    "depends_on": [],
                    "primary": {
                        "id": "scm-replicate-role",
                        "attributes": {
                            "arn": "arn:aws:iam::846542577485:role/scm-replicate-role",
                            "assume_role_policy": "{\"Version\":\"2012-10-17\",\"Statement\":[{\"Sid\":\"\",\"Effect\":\"Allow\",\"Principal\":{\"Service\":\"s3.amazonaws.com\"},\"Action\":\"sts:AssumeRole\"}]}",
                            "create_date": "2019-07-17T19:11:56Z",
                            "description": "",
                            "force_detach_policies": "false",
                            "id": "scm-replicate-role",
                            "max_session_duration": "3600",
                            "name": "scm-replicate-role",
                            "path": "/",
                            "tags.%": "0",
                            "unique_id": "AROA4KGO6T5GZUPUCXP3R"
                        },
                        "meta": {},
                        "tainted": false
                    },
                    "deposed": [],
                    "provider": "provider.aws"
                },
                "aws_iam_role_policy_attachment.replicate-attach": {
                    "type": "aws_iam_role_policy_attachment",
                    "depends_on": [
                        "aws_iam_policy.replicate_policy",
                        "aws_iam_role.s3_replicate_role"
                    ],
                    "primary": {
                        "id": "scm-replicate-role-20190717191230074500000005",
                        "attributes": {
                            "id": "scm-replicate-role-20190717191230074500000005",
                            "policy_arn": "arn:aws:iam::846542577485:policy/scm-replicate-policy",
                            "role": "scm-replicate-role"
                        },
                        "meta": {},
                        "tainted": false
                    },
                    "deposed": [],
                    "provider": "provider.aws"
                },
                "data.aws_caller_identity.current": {
                    "type": "aws_caller_identity",
                    "depends_on": [],
                    "primary": {
                        "id": "2019-07-17 19:11:22.6775576 +0000 UTC",
                        "attributes": {
                            "account_id": "846542577485",
                            "arn": "arn:aws:iam::846542577485:user/khatibinil",
                            "id": "2019-07-17 19:11:22.6775576 +0000 UTC",
                            "user_id": "AIDAJRWUITJLOOC2D7VA6"
                        },
                        "meta": {},
                        "tainted": false
                    },
                    "deposed": [],
                    "provider": "provider.aws"
                },
                "data.aws_iam_policy_document.replicate_policy": {
                    "type": "aws_iam_policy_document",
                    "depends_on": [
                        "data.aws_region.primary",
                        "data.aws_region.secondary",
                        "module.primary_buckets",
                        "module.secondary_buckets"
                    ],
                    "primary": {
                        "id": "2303041338",
                        "attributes": {
                            "id": "2303041338",
                            "json": "{\n  \"Version\": \"2012-10-17\",\n  \"Statement\": [\n    {\n      \"Sid\": \"1\",\n      \"Effect\": \"Allow\",\n      \"Action\": [\n        \"s3:ListBucket\",\n        \"s3:GetReplicationConfiguration\"\n      ],\n      \"Resource\": [\n        \"arn:aws:s3:::deployment-packages-w2\",\n        \"arn:aws:s3:::deployment-packages-e1\"\n      ]\n    },\n    {\n      \"Sid\": \"\",\n      \"Effect\": \"Allow\",\n      \"Action\": [\n        \"s3:GetObjectVersionForReplication\",\n        \"s3:GetObjectVersionAcl\"\n      ],\n      \"Resource\": [\n        \"arn:aws:s3:::deployment-packages-w2/*\",\n        \"arn:aws:s3:::deployment-packages-e1/*\"\n      ]\n    },\n    {\n      \"Sid\": \"\",\n      \"Effect\": \"Allow\",\n      \"Action\": [\n        \"s3:ReplicateObject\",\n        \"s3:ReplicateDelete\"\n      ],\n      \"Resource\": [\n        \"arn:aws:s3:::deployment-packages-w2/*\",\n        \"arn:aws:s3:::deployment-packages-e1/*\"\n      ]\n    },\n    {\n      \"Sid\": \"\",\n      \"Effect\": \"Allow\",\n      \"Action\": \"kms:Decrypt\",\n      \"Resource\": [\n        \"arn:aws:kms:us-west-2:846542577485:key/b3a7437b-eb75-4570-ba0c-9cfafaca7815\",\n        \"arn:aws:kms:us-east-1:846542577485:key/bc12fe13-b930-440e-ad06-761f9a0678ee\"\n      ],\n      \"Condition\": {\n        \"StringLike\": {\n          \"kms:EncryptionContext:aws:s3:arn\": [\n            \"arn:aws:s3:::deployment-packages-w2/*\",\n            \"arn:aws:s3:::deployment-packages-e1/*\"\n          ],\n          \"kms:ViaService\": [\n            \"s3.us-west-2.amazonaws.com\",\n            \"s3.us-east-1.amazonaws.com\"\n          ]\n        }\n      }\n    },\n    {\n      \"Sid\": \"\",\n      \"Effect\": \"Allow\",\n      \"Action\": \"kms:Encrypt\",\n      \"Resource\": [\n        \"arn:aws:kms:us-west-2:846542577485:key/b3a7437b-eb75-4570-ba0c-9cfafaca7815\",\n        \"arn:aws:kms:us-east-1:846542577485:key/bc12fe13-b930-440e-ad06-761f9a0678ee\"\n      ],\n      \"Condition\": {\n        \"StringLike\": {\n          \"kms:EncryptionContext:aws:s3:arn\": [\n            \"arn:aws:s3:::deployment-packages-w2/*\",\n            \"arn:aws:s3:::deployment-packages-e1/*\"\n          ],\n          \"kms:ViaService\": [\n            \"s3.us-west-2.amazonaws.com\",\n            \"s3.us-east-1.amazonaws.com\"\n          ]\n        }\n      }\n    }\n  ]\n}",
                            "statement.#": "5",
                            "statement.0.actions.#": "2",
                            "statement.0.actions.1794484843": "s3:GetReplicationConfiguration",
                            "statement.0.actions.486976917": "s3:ListBucket",
                            "statement.0.condition.#": "0",
                            "statement.0.effect": "Allow",
                            "statement.0.not_actions.#": "0",
                            "statement.0.not_principals.#": "0",
                            "statement.0.not_resources.#": "0",
                            "statement.0.principals.#": "0",
                            "statement.0.resources.#": "2",
                            "statement.0.resources.113224556": "arn:aws:s3:::deployment-packages-e1",
                            "statement.0.resources.842043313": "arn:aws:s3:::deployment-packages-w2",
                            "statement.0.sid": "1",
                            "statement.1.actions.#": "2",
                            "statement.1.actions.1405936138": "s3:GetObjectVersionAcl",
                            "statement.1.actions.3989205834": "s3:GetObjectVersionForReplication",
                            "statement.1.condition.#": "0",
                            "statement.1.effect": "Allow",
                            "statement.1.not_actions.#": "0",
                            "statement.1.not_principals.#": "0",
                            "statement.1.not_resources.#": "0",
                            "statement.1.principals.#": "0",
                            "statement.1.resources.#": "2",
                            "statement.1.resources.215639083": "arn:aws:s3:::deployment-packages-e1/*",
                            "statement.1.resources.72290087": "arn:aws:s3:::deployment-packages-w2/*",
                            "statement.1.sid": "",
                            "statement.2.actions.#": "2",
                            "statement.2.actions.1009480624": "s3:ReplicateObject",
                            "statement.2.actions.3873010871": "s3:ReplicateDelete",
                            "statement.2.condition.#": "0",
                            "statement.2.effect": "Allow",
                            "statement.2.not_actions.#": "0",
                            "statement.2.not_principals.#": "0",
                            "statement.2.not_resources.#": "0",
                            "statement.2.principals.#": "0",
                            "statement.2.resources.#": "2",
                            "statement.2.resources.215639083": "arn:aws:s3:::deployment-packages-e1/*",
                            "statement.2.resources.72290087": "arn:aws:s3:::deployment-packages-w2/*",
                            "statement.2.sid": "",
                            "statement.3.actions.#": "1",
                            "statement.3.actions.3733000735": "kms:Decrypt",
                            "statement.3.condition.#": "2",
                            "statement.3.condition.1920756438.test": "StringLike",
                            "statement.3.condition.1920756438.values.#": "2",
                            "statement.3.condition.1920756438.values.1896737771": "s3.us-west-2.amazonaws.com",
                            "statement.3.condition.1920756438.values.3104352209": "s3.us-east-1.amazonaws.com",
                            "statement.3.condition.1920756438.variable": "kms:ViaService",
                            "statement.3.condition.3054157509.test": "StringLike",
                            "statement.3.condition.3054157509.values.#": "2",
                            "statement.3.condition.3054157509.values.215639083": "arn:aws:s3:::deployment-packages-e1/*",
                            "statement.3.condition.3054157509.values.72290087": "arn:aws:s3:::deployment-packages-w2/*",
                            "statement.3.condition.3054157509.variable": "kms:EncryptionContext:aws:s3:arn",
                            "statement.3.effect": "Allow",
                            "statement.3.not_actions.#": "0",
                            "statement.3.not_principals.#": "0",
                            "statement.3.not_resources.#": "0",
                            "statement.3.principals.#": "0",
                            "statement.3.resources.#": "2",
                            "statement.3.resources.2221864292": "arn:aws:kms:us-west-2:846542577485:key/b3a7437b-eb75-4570-ba0c-9cfafaca7815",
                            "statement.3.resources.3223700892": "arn:aws:kms:us-east-1:846542577485:key/bc12fe13-b930-440e-ad06-761f9a0678ee",
                            "statement.3.sid": "",
                            "statement.4.actions.#": "1",
                            "statement.4.actions.271337083": "kms:Encrypt",
                            "statement.4.condition.#": "2",
                            "statement.4.condition.1920756438.test": "StringLike",
                            "statement.4.condition.1920756438.values.#": "2",
                            "statement.4.condition.1920756438.values.1896737771": "s3.us-west-2.amazonaws.com",
                            "statement.4.condition.1920756438.values.3104352209": "s3.us-east-1.amazonaws.com",
                            "statement.4.condition.1920756438.variable": "kms:ViaService",
                            "statement.4.condition.3054157509.test": "StringLike",
                            "statement.4.condition.3054157509.values.#": "2",
                            "statement.4.condition.3054157509.values.215639083": "arn:aws:s3:::deployment-packages-e1/*",
                            "statement.4.condition.3054157509.values.72290087": "arn:aws:s3:::deployment-packages-w2/*",
                            "statement.4.condition.3054157509.variable": "kms:EncryptionContext:aws:s3:arn",
                            "statement.4.effect": "Allow",
                            "statement.4.not_actions.#": "0",
                            "statement.4.not_principals.#": "0",
                            "statement.4.not_resources.#": "0",
                            "statement.4.principals.#": "0",
                            "statement.4.resources.#": "2",
                            "statement.4.resources.2221864292": "arn:aws:kms:us-west-2:846542577485:key/b3a7437b-eb75-4570-ba0c-9cfafaca7815",
                            "statement.4.resources.3223700892": "arn:aws:kms:us-east-1:846542577485:key/bc12fe13-b930-440e-ad06-761f9a0678ee",
                            "statement.4.sid": "",
                            "version": "2012-10-17"
                        },
                        "meta": {},
                        "tainted": false
                    },
                    "deposed": [],
                    "provider": "provider.aws"
                },
                "data.aws_region.primary": {
                    "type": "aws_region",
                    "depends_on": [],
                    "primary": {
                        "id": "us-west-2",
                        "attributes": {
                            "current": "true",
                            "description": "US West (Oregon)",
                            "endpoint": "ec2.us-west-2.amazonaws.com",
                            "id": "us-west-2",
                            "name": "us-west-2"
                        },
                        "meta": {},
                        "tainted": false
                    },
                    "deposed": [],
                    "provider": "provider.aws"
                },
                "data.aws_region.secondary": {
                    "type": "aws_region",
                    "depends_on": [],
                    "primary": {
                        "id": "us-east-1",
                        "attributes": {
                            "current": "true",
                            "description": "US East (N. Virginia)",
                            "endpoint": "ec2.us-east-1.amazonaws.com",
                            "id": "us-east-1",
                            "name": "us-east-1"
                        },
                        "meta": {},
                        "tainted": false
                    },
                    "deposed": [],
                    "provider": "provider.aws.sec"
                },
                "data.template_file.crr-json-primary": {
                    "type": "template_file",
                    "depends_on": [
                        "aws_iam_role.s3_replicate_role",
                        "module.secondary_buckets"
                    ],
                    "primary": {
                        "id": "8cb43f573f9b5586c3ffbc8ba7372388764d4a8814c6738b3087005c24de0fe1",
                        "attributes": {
                            "id": "8cb43f573f9b5586c3ffbc8ba7372388764d4a8814c6738b3087005c24de0fe1",
                            "rendered": "{\n  \"Role\": \"arn:aws:iam::846542577485:role/scm-replicate-role\",\n  \"Rules\": [\n    {\n      \"Prefix\": \"\",\n      \"Status\": \"Enabled\",\n      \"SourceSelectionCriteria\": {\n        \"SseKmsEncryptedObjects\": {\n          \"Status\": \"Enabled\"\n        }\n      },\n      \"Destination\": {\n        \"Bucket\": \"arn:aws:s3:::deployment-packages-e1\",\n        \"StorageClass\": \"STANDARD\",\n        \"EncryptionConfiguration\": {\n          \"ReplicaKmsKeyID\": \"arn:aws:kms:us-east-1:846542577485:key/bc12fe13-b930-440e-ad06-761f9a0678ee\"\n        }\n      },\n      \"ExistingObjectReplication\": {\n        \"Status\": \"Enabled\"\n      }\n    }\n  ]\n}\n",
                            "template": "{\n  \"Role\": \"${replicate_role}\",\n  \"Rules\": [\n    {\n      \"Prefix\": \"\",\n      \"Status\": \"Enabled\",\n      \"SourceSelectionCriteria\": {\n        \"SseKmsEncryptedObjects\": {\n          \"Status\": \"Enabled\"\n        }\n      },\n      \"Destination\": {\n        \"Bucket\": \"${destination_bucket_arn}\",\n        \"StorageClass\": \"STANDARD\",\n        \"EncryptionConfiguration\": {\n          \"ReplicaKmsKeyID\": \"${destination_kms_arn}\"\n        }\n      },\n      \"ExistingObjectReplication\": {\n        \"Status\": \"Enabled\"\n      }\n    }\n  ]\n}\n",
                            "vars.%": "3",
                            "vars.destination_bucket_arn": "arn:aws:s3:::deployment-packages-e1",
                            "vars.destination_kms_arn": "arn:aws:kms:us-east-1:846542577485:key/bc12fe13-b930-440e-ad06-761f9a0678ee",
                            "vars.replicate_role": "arn:aws:iam::846542577485:role/scm-replicate-role"
                        },
                        "meta": {},
                        "tainted": false
                    },
                    "deposed": [],
                    "provider": "module.replicated_buckets.provider.template"
                },
                "data.template_file.crr-json-secondary": {
                    "type": "template_file",
                    "depends_on": [
                        "aws_iam_role.s3_replicate_role",
                        "module.primary_buckets"
                    ],
                    "primary": {
                        "id": "26447a27ac0ffb9ad66242746845fe06ad9a7b0a92a48e4facf5440dbfb4edd3",
                        "attributes": {
                            "id": "26447a27ac0ffb9ad66242746845fe06ad9a7b0a92a48e4facf5440dbfb4edd3",
                            "rendered": "{\n  \"Role\": \"arn:aws:iam::846542577485:role/scm-replicate-role\",\n  \"Rules\": [\n    {\n      \"Prefix\": \"\",\n      \"Status\": \"Enabled\",\n      \"SourceSelectionCriteria\": {\n        \"SseKmsEncryptedObjects\": {\n          \"Status\": \"Enabled\"\n        }\n      },\n      \"Destination\": {\n        \"Bucket\": \"arn:aws:s3:::deployment-packages-w2\",\n        \"StorageClass\": \"STANDARD\",\n        \"EncryptionConfiguration\": {\n          \"ReplicaKmsKeyID\": \"arn:aws:kms:us-west-2:846542577485:key/b3a7437b-eb75-4570-ba0c-9cfafaca7815\"\n        }\n      },\n      \"ExistingObjectReplication\": {\n        \"Status\": \"Enabled\"\n      }\n    }\n  ]\n}\n",
                            "template": "{\n  \"Role\": \"${replicate_role}\",\n  \"Rules\": [\n    {\n      \"Prefix\": \"\",\n      \"Status\": \"Enabled\",\n      \"SourceSelectionCriteria\": {\n        \"SseKmsEncryptedObjects\": {\n          \"Status\": \"Enabled\"\n        }\n      },\n      \"Destination\": {\n        \"Bucket\": \"${destination_bucket_arn}\",\n        \"StorageClass\": \"STANDARD\",\n        \"EncryptionConfiguration\": {\n          \"ReplicaKmsKeyID\": \"${destination_kms_arn}\"\n        }\n      },\n      \"ExistingObjectReplication\": {\n        \"Status\": \"Enabled\"\n      }\n    }\n  ]\n}\n",
                            "vars.%": "3",
                            "vars.destination_bucket_arn": "arn:aws:s3:::deployment-packages-w2",
                            "vars.destination_kms_arn": "arn:aws:kms:us-west-2:846542577485:key/b3a7437b-eb75-4570-ba0c-9cfafaca7815",
                            "vars.replicate_role": "arn:aws:iam::846542577485:role/scm-replicate-role"
                        },
                        "meta": {},
                        "tainted": false
                    },
                    "deposed": [],
                    "provider": "module.replicated_buckets.provider.template"
                },
                "local_file.crr-json-primary": {
                    "type": "local_file",
                    "depends_on": [
                        "data.template_file.crr-json-primary.*",
                        "module.primary_buckets"
                    ],
                    "primary": {
                        "id": "a2d12da8af95e31a1669f1a95c77d6f0c71d00f6",
                        "attributes": {
                            "content": "{\n  \"Role\": \"arn:aws:iam::846542577485:role/scm-replicate-role\",\n  \"Rules\": [\n    {\n      \"Prefix\": \"\",\n      \"Status\": \"Enabled\",\n      \"SourceSelectionCriteria\": {\n        \"SseKmsEncryptedObjects\": {\n          \"Status\": \"Enabled\"\n        }\n      },\n      \"Destination\": {\n        \"Bucket\": \"arn:aws:s3:::deployment-packages-e1\",\n        \"StorageClass\": \"STANDARD\",\n        \"EncryptionConfiguration\": {\n          \"ReplicaKmsKeyID\": \"arn:aws:kms:us-east-1:846542577485:key/bc12fe13-b930-440e-ad06-761f9a0678ee\"\n        }\n      },\n      \"ExistingObjectReplication\": {\n        \"Status\": \"Enabled\"\n      }\n    }\n  ]\n}\n",
                            "filename": "C:\\VSTS\\SCM\\slotted-codebuilds.terraform/crr-kms-setup/deployment-packages-w2.json",
                            "id": "a2d12da8af95e31a1669f1a95c77d6f0c71d00f6"
                        },
                        "meta": {},
                        "tainted": false
                    },
                    "deposed": [],
                    "provider": "module.replicated_buckets.provider.local"
                },
                "local_file.crr-json-secondary": {
                    "type": "local_file",
                    "depends_on": [
                        "data.template_file.crr-json-secondary.*",
                        "module.secondary_buckets"
                    ],
                    "primary": {
                        "id": "ba5dc506c59b91725321fd6ffa2d16971740a52f",
                        "attributes": {
                            "content": "{\n  \"Role\": \"arn:aws:iam::846542577485:role/scm-replicate-role\",\n  \"Rules\": [\n    {\n      \"Prefix\": \"\",\n      \"Status\": \"Enabled\",\n      \"SourceSelectionCriteria\": {\n        \"SseKmsEncryptedObjects\": {\n          \"Status\": \"Enabled\"\n        }\n      },\n      \"Destination\": {\n        \"Bucket\": \"arn:aws:s3:::deployment-packages-w2\",\n        \"StorageClass\": \"STANDARD\",\n        \"EncryptionConfiguration\": {\n          \"ReplicaKmsKeyID\": \"arn:aws:kms:us-west-2:846542577485:key/b3a7437b-eb75-4570-ba0c-9cfafaca7815\"\n        }\n      },\n      \"ExistingObjectReplication\": {\n        \"Status\": \"Enabled\"\n      }\n    }\n  ]\n}\n",
                            "filename": "C:\\VSTS\\SCM\\slotted-codebuilds.terraform/crr-kms-setup/deployment-packages-e1.json",
                            "id": "ba5dc506c59b91725321fd6ffa2d16971740a52f"
                        },
                        "meta": {},
                        "tainted": false
                    },
                    "deposed": [],
                    "provider": "module.replicated_buckets.provider.local"
                }
            },
            "depends_on": []
        },
        {
            "path": [
                "root",
                "replicated_buckets",
                "primary_buckets"
            ],
            "outputs": {
                "bucket_arns": {
                    "sensitive": false,
                    "type": "list",
                    "value": [
                        "arn:aws:s3:::deployment-packages-w2"
                    ]
                },
                "bucket_names": {
                    "sensitive": false,
                    "type": "list",
                    "value": [
                        "deployment-packages-w2"
                    ]
                },
                "kms_key_aliases": {
                    "sensitive": false,
                    "type": "list",
                    "value": [
                        "arn:aws:kms:us-west-2:846542577485:alias/deployment-packages-w2"
                    ]
                },
                "kms_key_arns": {
                    "sensitive": false,
                    "type": "list",
                    "value": [
                        "arn:aws:kms:us-west-2:846542577485:key/b3a7437b-eb75-4570-ba0c-9cfafaca7815"
                    ]
                },
                "kms_key_ids": {
                    "sensitive": false,
                    "type": "list",
                    "value": [
                        "b3a7437b-eb75-4570-ba0c-9cfafaca7815"
                    ]
                }
            },
            "resources": {
                "aws_kms_alias.kms_alias": {
                    "type": "aws_kms_alias",
                    "depends_on": [
                        "aws_kms_key.kms_key.*"
                    ],
                    "primary": {
                        "id": "alias/deployment-packages-w2",
                        "attributes": {
                            "arn": "arn:aws:kms:us-west-2:846542577485:alias/deployment-packages-w2",
                            "id": "alias/deployment-packages-w2",
                            "name": "alias/deployment-packages-w2",
                            "target_key_arn": "arn:aws:kms:us-west-2:846542577485:key/b3a7437b-eb75-4570-ba0c-9cfafaca7815",
                            "target_key_id": "b3a7437b-eb75-4570-ba0c-9cfafaca7815"
                        },
                        "meta": {},
                        "tainted": false
                    },
                    "deposed": [],
                    "provider": "provider.aws"
                },
                "aws_kms_key.kms_key": {
                    "type": "aws_kms_key",
                    "depends_on": [
                        "data.aws_caller_identity.current"
                    ],
                    "primary": {
                        "id": "b3a7437b-eb75-4570-ba0c-9cfafaca7815",
                        "attributes": {
                            "arn": "arn:aws:kms:us-west-2:846542577485:key/b3a7437b-eb75-4570-ba0c-9cfafaca7815",
                            "description": "deployment-packages-w2 key",
                            "enable_key_rotation": "true",
                            "id": "b3a7437b-eb75-4570-ba0c-9cfafaca7815",
                            "is_enabled": "true",
                            "key_id": "b3a7437b-eb75-4570-ba0c-9cfafaca7815",
                            "key_usage": "ENCRYPT_DECRYPT",
                            "policy": "{\"Statement\":[{\"Action\":\"kms:*\",\"Effect\":\"Allow\",\"Principal\":{\"AWS\":\"arn:aws:iam::846542577485:root\"},\"Resource\":\"*\",\"Sid\":\"Enable IAM User Permissions\"}],\"Version\":\"2012-10-17\"}",
                            "tags.%": "2",
                            "tags.Environment": "prod",
                            "tags.Name": "deployment-packages-w2 key"
                        },
                        "meta": {},
                        "tainted": false
                    },
                    "deposed": [],
                    "provider": "provider.aws"
                },
                "aws_s3_bucket.bucket": {
                    "type": "aws_s3_bucket",
                    "depends_on": [
                        "aws_kms_key.kms_key.*",
                        "aws_s3_bucket.logging_bucket",
                        "data.aws_caller_identity.current"
                    ],
                    "primary": {
                        "id": "deployment-packages-w2",
                        "attributes": {
                            "acceleration_status": "",
                            "acl": "private",
                            "arn": "arn:aws:s3:::deployment-packages-w2",
                            "bucket": "deployment-packages-w2",
                            "bucket_domain_name": "deployment-packages-w2.s3.amazonaws.com",
                            "bucket_regional_domain_name": "deployment-packages-w2.s3.us-west-2.amazonaws.com",
                            "cors_rule.#": "0",
                            "force_destroy": "false",
                            "hosted_zone_id": "Z3BJ6K6RIION7M",
                            "id": "deployment-packages-w2",
                            "lifecycle_rule.#": "0",
                            "logging.#": "1",
                            "logging.256620358.target_bucket": "prod-us-west-2-scm-s3-repl-logs",
                            "logging.256620358.target_prefix": "deployment-packages-w2/",
                            "object_lock_configuration.#": "0",
                            "policy": "{\"Statement\":[{\"Action\":[\"s3:PutObject\",\"s3:ReplicateObject\"],\"Condition\":{\"StringNotEquals\":{\"s3:x-amz-server-side-encryption\":\"aws:kms\"}},\"Effect\":\"Deny\",\"Principal\":{\"AWS\":\"*\"},\"Resource\":\"arn:aws:s3:::deployment-packages-w2/*\",\"Sid\":\"DenyUnEncryptedObjectUploads\"},{\"Action\":[\"s3:PutObject\",\"s3:ReplicateObject\"],\"Condition\":{\"StringNotEquals\":{\"s3:x-amz-server-side-encryption-aws-kms-key-id\":\"arn:aws:kms:us-west-2:846542577485:key/b3a7437b-eb75-4570-ba0c-9cfafaca7815\"}},\"Effect\":\"Deny\",\"Principal\":{\"AWS\":\"*\"},\"Resource\":\"arn:aws:s3:::deployment-packages-w2/*\",\"Sid\":\"DenyUnEncryptedObjectUploads\"},{\"Action\":\"s3:DeleteObjectVersion\",\"Effect\":\"Deny\",\"Principal\":{\"AWS\":\"*\"},\"Resource\":\"arn:aws:s3:::deployment-packages-w2/*\",\"Sid\":\"DenyDelete\"},{\"Action\":\"s3:DeleteBucket\",\"Effect\":\"Deny\",\"Principal\":{\"AWS\":\"*\"},\"Resource\":\"arn:aws:s3:::deployment-packages-w2\",\"Sid\":\"DenyDelete\"},{\"Action\":[\"s3:ReplicateObject\",\"s3:ReplicateDelete\",\"s3:ObjectOwnerOverrideToBucketOwner\"],\"Effect\":\"Allow\",\"Principal\":{\"AWS\":\"arn:aws:iam::846542577485:root\"},\"Resource\":\"arn:aws:s3:::deployment-packages-w2/*\",\"Sid\":\"DRReplicate\"}],\"Version\":\"2012-10-17\"}",
                            "region": "us-west-2",
                            "replication_configuration.#": "0",
                            "request_payer": "BucketOwner",
                            "server_side_encryption_configuration.#": "0",
                            "tags.%": "3",
                            "tags.DataClassification": "Confidential",
                            "tags.Environment": "prod",
                            "tags.Name": "deployment-packages-w2",
                            "versioning.#": "1",
                            "versioning.0.enabled": "true",
                            "versioning.0.mfa_delete": "false",
                            "website.#": "0"
                        },
                        "meta": {},
                        "tainted": false
                    },
                    "deposed": [],
                    "provider": "provider.aws"
                },
                "aws_s3_bucket.logging_bucket": {
                    "type": "aws_s3_bucket",
                    "depends_on": [
                        "local.logging_bucket_name"
                    ],
                    "primary": {
                        "id": "prod-us-west-2-scm-s3-repl-logs",
                        "attributes": {
                            "acceleration_status": "",
                            "acl": "log-delivery-write",
                            "arn": "arn:aws:s3:::prod-us-west-2-scm-s3-repl-logs",
                            "bucket": "prod-us-west-2-scm-s3-repl-logs",
                            "bucket_domain_name": "prod-us-west-2-scm-s3-repl-logs.s3.amazonaws.com",
                            "bucket_regional_domain_name": "prod-us-west-2-scm-s3-repl-logs.s3.us-west-2.amazonaws.com",
                            "cors_rule.#": "0",
                            "force_destroy": "false",
                            "hosted_zone_id": "Z3BJ6K6RIION7M",
                            "id": "prod-us-west-2-scm-s3-repl-logs",
                            "lifecycle_rule.#": "1",
                            "lifecycle_rule.0.abort_incomplete_multipart_upload_days": "2",
                            "lifecycle_rule.0.enabled": "true",
                            "lifecycle_rule.0.expiration.#": "1",
                            "lifecycle_rule.0.expiration.2318636752.date": "",
                            "lifecycle_rule.0.expiration.2318636752.days": "120",
                            "lifecycle_rule.0.expiration.2318636752.expired_object_delete_marker": "false",
                            "lifecycle_rule.0.id": "tf-s3-lifecycle-20190717191151940900000001",
                            "lifecycle_rule.0.noncurrent_version_expiration.#": "1",
                            "lifecycle_rule.0.noncurrent_version_expiration.3567590304.days": "120",
                            "lifecycle_rule.0.noncurrent_version_transition.#": "0",
                            "lifecycle_rule.0.prefix": "",
                            "lifecycle_rule.0.tags.%": "0",
                            "lifecycle_rule.0.transition.#": "1",
                            "lifecycle_rule.0.transition.2000431762.date": "",
                            "lifecycle_rule.0.transition.2000431762.days": "30",
                            "lifecycle_rule.0.transition.2000431762.storage_class": "STANDARD_IA",
                            "logging.#": "0",
                            "object_lock_configuration.#": "0",
                            "policy": "{\"Statement\":[{\"Action\":\"s3:DeleteObjectVersion\",\"Effect\":\"Deny\",\"Principal\":{\"AWS\":\"*\"},\"Resource\":\"arn:aws:s3:::prod-us-west-2-scm-s3-repl-logs/*\",\"Sid\":\"DenyDelete\"},{\"Action\":\"s3:DeleteBucket\",\"Effect\":\"Deny\",\"Principal\":{\"AWS\":\"*\"},\"Resource\":\"arn:aws:s3:::prod-us-west-2-scm-s3-repl-logs\",\"Sid\":\"DenyDelete\"}],\"Version\":\"2012-10-17\"}",
                            "region": "us-west-2",
                            "replication_configuration.#": "0",
                            "request_payer": "BucketOwner",
                            "server_side_encryption_configuration.#": "0",
                            "tags.%": "3",
                            "tags.DataClassification": "Proprietary",
                            "tags.Environment": "prod",
                            "tags.Name": "prod-us-west-2-scm-s3-repl-logs",
                            "versioning.#": "1",
                            "versioning.0.enabled": "true",
                            "versioning.0.mfa_delete": "false",
                            "website.#": "0"
                        },
                        "meta": {},
                        "tainted": false
                    },
                    "deposed": [],
                    "provider": "provider.aws"
                },
                "data.aws_caller_identity.current": {
                    "type": "aws_caller_identity",
                    "depends_on": [],
                    "primary": {
                        "id": "2019-07-17 19:11:22.679559 +0000 UTC",
                        "attributes": {
                            "account_id": "846542577485",
                            "arn": "arn:aws:iam::846542577485:user/khatibinil",
                            "id": "2019-07-17 19:11:22.679559 +0000 UTC",
                            "user_id": "AIDAJRWUITJLOOC2D7VA6"
                        },
                        "meta": {},
                        "tainted": false
                    },
                    "deposed": [],
                    "provider": "provider.aws"
                },
                "data.aws_region.current": {
                    "type": "aws_region",
                    "depends_on": [],
                    "primary": {
                        "id": "us-west-2",
                        "attributes": {
                            "current": "true",
                            "description": "US West (Oregon)",
                            "endpoint": "ec2.us-west-2.amazonaws.com",
                            "id": "us-west-2",
                            "name": "us-west-2"
                        },
                        "meta": {},
                        "tainted": false
                    },
                    "deposed": [],
                    "provider": "provider.aws"
                }
            },
            "depends_on": []
        },
        {
            "path": [
                "root",
                "replicated_buckets",
                "secondary_buckets"
            ],
            "outputs": {
                "bucket_arns": {
                    "sensitive": false,
                    "type": "list",
                    "value": [
                        "arn:aws:s3:::deployment-packages-e1"
                    ]
                },
                "bucket_names": {
                    "sensitive": false,
                    "type": "list",
                    "value": [
                        "deployment-packages-e1"
                    ]
                },
                "kms_key_aliases": {
                    "sensitive": false,
                    "type": "list",
                    "value": [
                        "arn:aws:kms:us-east-1:846542577485:alias/deployment-packages-e1"
                    ]
                },
                "kms_key_arns": {
                    "sensitive": false,
                    "type": "list",
                    "value": [
                        "arn:aws:kms:us-east-1:846542577485:key/bc12fe13-b930-440e-ad06-761f9a0678ee"
                    ]
                },
                "kms_key_ids": {
                    "sensitive": false,
                    "type": "list",
                    "value": [
                        "bc12fe13-b930-440e-ad06-761f9a0678ee"
                    ]
                }
            },
            "resources": {
                "aws_kms_alias.kms_alias": {
                    "type": "aws_kms_alias",
                    "depends_on": [
                        "aws_kms_key.kms_key.*"
                    ],
                    "primary": {
                        "id": "alias/deployment-packages-e1",
                        "attributes": {
                            "arn": "arn:aws:kms:us-east-1:846542577485:alias/deployment-packages-e1",
                            "id": "alias/deployment-packages-e1",
                            "name": "alias/deployment-packages-e1",
                            "target_key_arn": "arn:aws:kms:us-east-1:846542577485:key/bc12fe13-b930-440e-ad06-761f9a0678ee",
                            "target_key_id": "bc12fe13-b930-440e-ad06-761f9a0678ee"
                        },
                        "meta": {},
                        "tainted": false
                    },
                    "deposed": [],
                    "provider": "provider.aws.sec"
                },
                "aws_kms_key.kms_key": {
                    "type": "aws_kms_key",
                    "depends_on": [
                        "data.aws_caller_identity.current"
                    ],
                    "primary": {
                        "id": "bc12fe13-b930-440e-ad06-761f9a0678ee",
                        "attributes": {
                            "arn": "arn:aws:kms:us-east-1:846542577485:key/bc12fe13-b930-440e-ad06-761f9a0678ee",
                            "description": "deployment-packages-e1 key",
                            "enable_key_rotation": "true",
                            "id": "bc12fe13-b930-440e-ad06-761f9a0678ee",
                            "is_enabled": "true",
                            "key_id": "bc12fe13-b930-440e-ad06-761f9a0678ee",
                            "key_usage": "ENCRYPT_DECRYPT",
                            "policy": "{\"Statement\":[{\"Action\":\"kms:*\",\"Effect\":\"Allow\",\"Principal\":{\"AWS\":\"arn:aws:iam::846542577485:root\"},\"Resource\":\"*\",\"Sid\":\"Enable IAM User Permissions\"}],\"Version\":\"2012-10-17\"}",
                            "tags.%": "2",
                            "tags.Environment": "prod",
                            "tags.Name": "deployment-packages-e1 key"
                        },
                        "meta": {},
                        "tainted": false
                    },
                    "deposed": [],
                    "provider": "provider.aws.sec"
                },
                "aws_s3_bucket.bucket": {
                    "type": "aws_s3_bucket",
                    "depends_on": [
                        "aws_kms_key.kms_key.*",
                        "aws_s3_bucket.logging_bucket",
                        "data.aws_caller_identity.current"
                    ],
                    "primary": {
                        "id": "deployment-packages-e1",
                        "attributes": {
                            "acceleration_status": "",
                            "acl": "private",
                            "arn": "arn:aws:s3:::deployment-packages-e1",
                            "bucket": "deployment-packages-e1",
                            "bucket_domain_name": "deployment-packages-e1.s3.amazonaws.com",
                            "bucket_regional_domain_name": "deployment-packages-e1.s3.amazonaws.com",
                            "cors_rule.#": "0",
                            "force_destroy": "false",
                            "hosted_zone_id": "Z3AQBSTGFYJSTF",
                            "id": "deployment-packages-e1",
                            "lifecycle_rule.#": "1",
                            "lifecycle_rule.0.abort_incomplete_multipart_upload_days": "7",
                            "lifecycle_rule.0.enabled": "true",
                            "lifecycle_rule.0.expiration.#": "1",
                            "lifecycle_rule.0.expiration.3591068768.date": "",
                            "lifecycle_rule.0.expiration.3591068768.days": "0",
                            "lifecycle_rule.0.expiration.3591068768.expired_object_delete_marker": "true",
                            "lifecycle_rule.0.id": "tf-s3-lifecycle-20190717191212295900000004",
                            "lifecycle_rule.0.noncurrent_version_expiration.#": "1",
                            "lifecycle_rule.0.noncurrent_version_expiration.805297265.days": "366",
                            "lifecycle_rule.0.noncurrent_version_transition.#": "0",
                            "lifecycle_rule.0.prefix": "",
                            "lifecycle_rule.0.tags.%": "0",
                            "lifecycle_rule.0.transition.#": "1",
                            "lifecycle_rule.0.transition.2000431762.date": "",
                            "lifecycle_rule.0.transition.2000431762.days": "30",
                            "lifecycle_rule.0.transition.2000431762.storage_class": "STANDARD_IA",
                            "logging.#": "1",
                            "logging.1445183017.target_bucket": "prod-us-east-1-scm-s3-repl-logs",
                            "logging.1445183017.target_prefix": "deployment-packages-e1/",
                            "object_lock_configuration.#": "0",
                            "policy": "{\"Statement\":[{\"Action\":[\"s3:PutObject\",\"s3:ReplicateObject\"],\"Condition\":{\"StringNotEquals\":{\"s3:x-amz-server-side-encryption\":\"aws:kms\"}},\"Effect\":\"Deny\",\"Principal\":{\"AWS\":\"*\"},\"Resource\":\"arn:aws:s3:::deployment-packages-e1/*\",\"Sid\":\"DenyUnEncryptedObjectUploads\"},{\"Action\":[\"s3:PutObject\",\"s3:ReplicateObject\"],\"Condition\":{\"StringNotEquals\":{\"s3:x-amz-server-side-encryption-aws-kms-key-id\":\"arn:aws:kms:us-east-1:846542577485:key/bc12fe13-b930-440e-ad06-761f9a0678ee\"}},\"Effect\":\"Deny\",\"Principal\":{\"AWS\":\"*\"},\"Resource\":\"arn:aws:s3:::deployment-packages-e1/*\",\"Sid\":\"DenyUnEncryptedObjectUploads\"},{\"Action\":\"s3:DeleteObjectVersion\",\"Effect\":\"Deny\",\"Principal\":{\"AWS\":\"*\"},\"Resource\":\"arn:aws:s3:::deployment-packages-e1/*\",\"Sid\":\"DenyDelete\"},{\"Action\":\"s3:DeleteBucket\",\"Effect\":\"Deny\",\"Principal\":{\"AWS\":\"*\"},\"Resource\":\"arn:aws:s3:::deployment-packages-e1\",\"Sid\":\"DenyDelete\"},{\"Action\":[\"s3:ReplicateObject\",\"s3:ReplicateDelete\",\"s3:ObjectOwnerOverrideToBucketOwner\"],\"Effect\":\"Allow\",\"Principal\":{\"AWS\":\"arn:aws:iam::846542577485:root\"},\"Resource\":\"arn:aws:s3:::deployment-packages-e1/*\",\"Sid\":\"DRReplicate\"}],\"Version\":\"2012-10-17\"}",
                            "region": "us-east-1",
                            "replication_configuration.#": "0",
                            "request_payer": "BucketOwner",
                            "server_side_encryption_configuration.#": "0",
                            "tags.%": "3",
                            "tags.DataClassification": "Confidential",
                            "tags.Environment": "prod",
                            "tags.Name": "deployment-packages-e1",
                            "versioning.#": "1",
                            "versioning.0.enabled": "true",
                            "versioning.0.mfa_delete": "false",
                            "website.#": "0"
                        },
                        "meta": {},
                        "tainted": false
                    },
                    "deposed": [],
                    "provider": "provider.aws.sec"
                },
                "aws_s3_bucket.logging_bucket": {
                    "type": "aws_s3_bucket",
                    "depends_on": [
                        "local.logging_bucket_name"
                    ],
                    "primary": {
                        "id": "prod-us-east-1-scm-s3-repl-logs",
                        "attributes": {
                            "acceleration_status": "",
                            "acl": "log-delivery-write",
                            "arn": "arn:aws:s3:::prod-us-east-1-scm-s3-repl-logs",
                            "bucket": "prod-us-east-1-scm-s3-repl-logs",
                            "bucket_domain_name": "prod-us-east-1-scm-s3-repl-logs.s3.amazonaws.com",
                            "bucket_regional_domain_name": "prod-us-east-1-scm-s3-repl-logs.s3.amazonaws.com",
                            "cors_rule.#": "0",
                            "force_destroy": "false",
                            "hosted_zone_id": "Z3AQBSTGFYJSTF",
                            "id": "prod-us-east-1-scm-s3-repl-logs",
                            "lifecycle_rule.#": "1",
                            "lifecycle_rule.0.abort_incomplete_multipart_upload_days": "2",
                            "lifecycle_rule.0.enabled": "true",
                            "lifecycle_rule.0.expiration.#": "1",
                            "lifecycle_rule.0.expiration.2318636752.date": "",
                            "lifecycle_rule.0.expiration.2318636752.days": "120",
                            "lifecycle_rule.0.expiration.2318636752.expired_object_delete_marker": "false",
                            "lifecycle_rule.0.id": "tf-s3-lifecycle-20190717191203713900000002",
                            "lifecycle_rule.0.noncurrent_version_expiration.#": "1",
                            "lifecycle_rule.0.noncurrent_version_expiration.3567590304.days": "120",
                            "lifecycle_rule.0.noncurrent_version_transition.#": "0",
                            "lifecycle_rule.0.prefix": "",
                            "lifecycle_rule.0.tags.%": "0",
                            "lifecycle_rule.0.transition.#": "1",
                            "lifecycle_rule.0.transition.2000431762.date": "",
                            "lifecycle_rule.0.transition.2000431762.days": "30",
                            "lifecycle_rule.0.transition.2000431762.storage_class": "STANDARD_IA",
                            "logging.#": "0",
                            "object_lock_configuration.#": "0",
                            "policy": "{\"Statement\":[{\"Action\":\"s3:DeleteObjectVersion\",\"Effect\":\"Deny\",\"Principal\":{\"AWS\":\"*\"},\"Resource\":\"arn:aws:s3:::prod-us-east-1-scm-s3-repl-logs/*\",\"Sid\":\"DenyDelete\"},{\"Action\":\"s3:DeleteBucket\",\"Effect\":\"Deny\",\"Principal\":{\"AWS\":\"*\"},\"Resource\":\"arn:aws:s3:::prod-us-east-1-scm-s3-repl-logs\",\"Sid\":\"DenyDelete\"}],\"Version\":\"2012-10-17\"}",
                            "region": "us-east-1",
                            "replication_configuration.#": "0",
                            "request_payer": "BucketOwner",
                            "server_side_encryption_configuration.#": "0",
                            "tags.%": "3",
                            "tags.DataClassification": "Proprietary",
                            "tags.Environment": "prod",
                            "tags.Name": "prod-us-east-1-scm-s3-repl-logs",
                            "versioning.#": "1",
                            "versioning.0.enabled": "true",
                            "versioning.0.mfa_delete": "false",
                            "website.#": "0"
                        },
                        "meta": {},
                        "tainted": false
                    },
                    "deposed": [],
                    "provider": "provider.aws.sec"
                },
                "data.aws_caller_identity.current": {
                    "type": "aws_caller_identity",
                    "depends_on": [],
                    "primary": {
                        "id": "2019-07-17 19:11:22.8315593 +0000 UTC",
                        "attributes": {
                            "account_id": "846542577485",
                            "arn": "arn:aws:iam::846542577485:user/khatibinil",
                            "id": "2019-07-17 19:11:22.8315593 +0000 UTC",
                            "user_id": "AIDAJRWUITJLOOC2D7VA6"
                        },
                        "meta": {},
                        "tainted": false
                    },
                    "deposed": [],
                    "provider": "provider.aws.sec"
                },
                "data.aws_region.current": {
                    "type": "aws_region",
                    "depends_on": [],
                    "primary": {
                        "id": "us-east-1",
                        "attributes": {
                            "current": "true",
                            "description": "US East (N. Virginia)",
                            "endpoint": "ec2.us-east-1.amazonaws.com",
                            "id": "us-east-1",
                            "name": "us-east-1"
                        },
                        "meta": {},
                        "tainted": false
                    },
                    "deposed": [],
                    "provider": "provider.aws.sec"
                }
            },
            "depends_on": []
        }
    ]
}
